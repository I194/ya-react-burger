(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{100:function(e,t,n){e.exports={containerMain:"Constructor_containerMain__1W1gz"}},101:function(e,t,n){e.exports={ingredient:"Ingredient_ingredient__2meZJ"}},102:function(e,t,n){e.exports={orderContainer:"Order_orderContainer__3OICI"}},111:function(e,t,n){},13:function(e,t,n){e.exports={content:"Profile_content__E8uhT",leftBlock:"Profile_leftBlock__3tCOh",menu:"Profile_menu__2k3D6",rightBlock:"Profile_rightBlock__IzDFD",longInput:"Profile_longInput__12pHO",saveButton:"Profile_saveButton__2zb4r",cancelButton:"Profile_cancelButton__1GilK",menuItem:"Profile_menuItem__3RTO6",navigationLink:"Profile_navigationLink__3llqU",chosen:"Profile_chosen__k-J7v"}},14:function(e,t,n){e.exports={containerMain:"BurgerIngredients_containerMain__ePbQ2",columnsPuns:"BurgerIngredients_columnsPuns__14-Eq",col:"BurgerIngredients_col__2TY3O",break:"BurgerIngredients_break__23mJC",illustration:"BurgerIngredients_illustration__1Jfaa",price:"BurgerIngredients_price__pcGcu",name:"BurgerIngredients_name__15sJx",counter:"BurgerIngredients_counter__2oy_9",ingredients:"BurgerIngredients_ingredients__3Hd3I",nutritionDetails:"BurgerIngredients_nutritionDetails__3o0rz",nutritionElement:"BurgerIngredients_nutritionElement__1oUPi"}},15:function(e,t,n){e.exports={containerMain:"BurgerConstructor_containerMain__1bMA3",totalInfo:"BurgerConstructor_totalInfo__36Lda",price:"BurgerConstructor_price__3b11A",default:"BurgerConstructor_default__2Wj_n",medium:"BurgerConstructor_medium__3MJgG",large:"BurgerConstructor_large__3XJkP",pentaSmall:"BurgerConstructor_pentaSmall__TiyiV",pentaMedium:"BurgerConstructor_pentaMedium__2WTRv",pentaLarge:"BurgerConstructor_pentaLarge__16_Ll",element:"BurgerConstructor_element__DgjSF",optionalIngredients:"BurgerConstructor_optionalIngredients__EgAFZ",orderId:"BurgerConstructor_orderId__39L70",orderDetail:"BurgerConstructor_orderDetail__1oEAS",orderDone:"BurgerConstructor_orderDone__7ekvr",doneImage:"BurgerConstructor_doneImage__3GoZ7"}},199:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return an}));var c=n(1),r=n.n(c),a=n(33),i=n.n(a),s=n(5),o=(n(111),n(11)),l=n(4),u=n(25),d=n.n(u),j=n(0),p=function(e){var t=e.icon,n=e.exact,c=e.linkTo,r=e.children;return Object(j.jsxs)(s.c,{to:c,className:"".concat(d.a.navigationLink),activeClassName:d.a.chosen,exact:n,children:[Object(j.jsx)("div",{className:"".concat(d.a.icon24," "),children:t}),Object(j.jsx)("p",{className:"".concat(d.a.name),children:r})]})};var b=function(){return Object(j.jsx)("header",{className:"".concat(d.a.navigationPanel," text text_type_main-default"),children:Object(j.jsx)("div",{className:"".concat(d.a.content),children:Object(j.jsxs)("div",{className:"".concat(d.a.navigation),children:[Object(j.jsxs)("div",{className:"".concat(d.a.navGroup),children:[Object(j.jsx)(p,{icon:Object(j.jsx)(l.BurgerIcon,{type:"secondary"}),exact:!0,linkTo:"/",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"}),Object(j.jsx)(p,{icon:Object(j.jsx)(l.ListIcon,{type:"secondary"}),exact:!1,linkTo:"/feed",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]}),Object(j.jsx)(s.b,{to:"/",className:"".concat(d.a.logo),children:Object(j.jsx)(l.Logo,{})}),Object(j.jsx)(p,{icon:Object(j.jsx)(l.ProfileIcon,{type:"secondary"}),linkTo:"/profile",exact:!1,children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})})},m=n(204),h=n(104),O=n(8),x=n(41),f=x.c,_=function(){return Object(x.b)()},g=n(14),v=n.n(g),y=n(205),N=function(e){var t=e.image,n=e.alt;return Object(j.jsx)("div",{className:"".concat(v.a.illustration),children:Object(j.jsx)("img",{src:t,alt:n})})},S=function(e){var t=e.box,n=e.size,c=e.name;return Object(j.jsx)("div",{className:"".concat(v.a.name," ").concat(t||""),children:Object(j.jsx)("p",{className:"text text_type_main-".concat(n||"default"),children:c})})},I=function(e){var t=e.price;return Object(j.jsxs)("div",{className:"".concat(v.a.price),children:[Object(j.jsx)("p",{className:"text text_type_digits-default mr-2",children:t}),Object(j.jsx)(l.CurrencyIcon,{type:"primary"})]})},C=function(e){var t=e.count;return Object(j.jsx)("div",{className:"".concat(v.a.counter),style:{visibility:"".concat(t<=0?"hidden":"visible")},children:Object(j.jsx)("p",{className:"text text_type_digits-default pt-1",children:t})})},E=function(e){var t=e.id,n=e.name,c=e.price,r=e.count,a=e.image,i=Object(y.a)({type:"ingredient",item:{id:t}}),s=Object(O.a)(i,2)[1];return Object(j.jsxs)("div",{ref:s,children:[Object(j.jsx)(N,{image:a,alt:n}),Object(j.jsx)(I,{price:c}),Object(j.jsx)(S,{name:n}),Object(j.jsx)(C,{count:r})]})},T=n(2),k=n(10),w=n.n(k),D=n(21),B="https://norma.nomoreparties.space/api",R=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))};function A(){return(A=Object(D.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(B,"/ingredients")).then((function(e){return R(e)})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(D.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(B,"/orders"),{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:localStorage.accessToken},body:JSON.stringify({ingredients:t})}).then((function(e){return R(e)})).then((function(e){return e})).catch((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(D.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(B,"/orders/all")).then((function(e){return R(e)})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(D.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(B,"/auth/token"),{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({token:t})}).then((function(e){return R(e)})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(D.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(B,"/auth/user"),{method:"GET",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:localStorage.accessToken}}).then((function(e){return R(e)})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(D.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(B,"/auth/user"),{method:"PATCH",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Authorization:localStorage.accessToken},body:JSON.stringify(Object(T.a)({},t))}).then((function(e){return R(e)})).then((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(D.a)(w.a.mark((function e(t,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(B,"/auth/login"),{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}).then((function(e){return R(e)})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(D.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(B,"/auth/logout"),{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({token:t})}).then((function(e){return R(e)})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(D.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(B,"/password-reset"),{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({email:t})}).then((function(e){return R(e)})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(D.a)(w.a.mark((function e(t,n){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(B,"/password-reset/reset"),{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({password:t,token:n})}).then((function(e){return R(e)})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(D.a)(w.a.mark((function e(t,n,c){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(B,"/auth/register"),{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({email:t,password:n,name:c})}).then((function(e){return R(e)})).then((function(e){return e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q="GET_INGREDIENTS_REQUEST",V="GET_INGREDIENTS_SUCCESS",K="GET_INGREDIENTS_FAILED",Q="INCREASE_INGREDIENT_COUNT",Z="DECREASE_INGREDIENT_COUNT",Y="SET_INGREDIENT_COUNT",X="CHANGE_SELECTED_BUN",$="ADD_SELECTED_INGREDIENT",ee="DELETE_SELECTED_INGREDIENT",te="SET_SELECTED_INGREDIENTS",ne="SET_INGREDIENT_MODAL",ce="DELETE_INGREDIENT_MODAL",re="GET_ORDER_REQUEST",ae="GET_ORDER_SUCCESS",ie="GET_ORDER_FAILED",se="GET_ORDERS_REQUEST",oe="GET_ORDERS_SUCCESS",le="GET_ORDERS_FAILED",ue="WS_CONNECTION_START",de="WS_CONNECTION_SUCCESS",je="WS_CONNECTION_ERROR",pe="WS_CONNECTION_CLOSE",be="WS_CONNECTION_CLOSED",me="WS_GET_MESSAGE";function he(){return function(e){e({type:q}),function(){return A.apply(this,arguments)}().then((function(t){t&&t.success?e({type:V,ingredients:t.data}):e({type:K,error:{message:"something went wrong..."}})})).catch((function(e){return console.log(e)}))}}function Oe(e){return function(t){t({type:re}),function(e){return P.apply(this,arguments)}(e).then((function(e){e&&e.success?(t({type:ae,order:e}),t({type:te,ingredients:[]}),t({type:X,bunId:null}),t(he())):t({type:ie,error:{message:"something went wrong..."}})})).catch((function(e){return console.log(e)}))}}function xe(){return function(e){e({type:se}),function(){return F.apply(this,arguments)}().then((function(t){t&&t.success?e({type:oe,orders:t.orders,total:t.total,today:t.totalToday}):e({type:le,error:{message:"something went wrong..."}})})).catch((function(e){return console.log(e)}))}}var fe=function(e){var t=e.id,n=e.children;return Object(j.jsx)("p",{className:"text text_type_main-medium pt-10 pb-6",style:{width:"100%"},id:t,children:n})},_e=function(e){var t=e.children;return Object(j.jsx)("div",{className:"".concat(v.a.columnsPuns),style:{textAlign:"center"},children:t})},ge=function(e){var t=e.onClick,n=e.children;return Object(j.jsx)("div",{className:"".concat(v.a.col),onClick:t,children:n})},ve=function(){var e=_(),t=Object(o.h)(),n=f((function(e){return e.shop.ingredients}));Object(c.useEffect)((function(){n.length||e(he())}),[e,n]);var r=Object(c.useMemo)((function(){return n.filter((function(e){return"bun"===e.type}))}),[n]),a=Object(c.useMemo)((function(){return n.filter((function(e){return"main"===e.type}))}),[n]),i=Object(c.useMemo)((function(){return n.filter((function(e){return"sauce"===e.type}))}),[n]),u=function(e){return Object(j.jsx)(ge,{onClick:function(){d(e)},children:Object(j.jsx)(s.b,{to:{pathname:"/ingredients/".concat(e._id),state:{modal:!0,background:t}},children:Object(j.jsx)(E,{name:e.name,price:e.price,image:e.image,id:e._id,count:e.__v})})},e._id)},d=function(t){e({type:ne,ingredient:t})},p=Object(c.useState)("buns"),b=Object(O.a)(p,2),m=b[0],h=b[1],x=function(e){h(e);var t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})};return n.length?Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"".concat(v.a.containerMain),style:{textAlign:"left"},children:[Object(j.jsx)("p",{className:"text text_type_main-large pt-10 pb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(j.jsxs)("div",{style:{display:"flex",width:"100%"},children:[Object(j.jsx)(l.Tab,{value:"buns",active:"buns"===m,onClick:x,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(j.jsx)(l.Tab,{value:"sauces",active:"sauces"===m,onClick:x,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(j.jsx)(l.Tab,{value:"mains",active:"mains"===m,onClick:x,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(j.jsxs)("div",{className:"".concat(v.a.ingredients),id:"ingredients",onScroll:function(){var e=["buns","sauces","mains"],t=e.map((function(e){return document.getElementById(e)})),n=document.getElementById("ingredients").scrollTop;t.forEach((function(t,c){var r=t.offsetTop;r<=n+200&&r>=n-200&&h(e[c])}))},children:[Object(j.jsx)(fe,{id:"buns",children:"\u0411\u0443\u043b\u043a\u0438"}),Object(j.jsx)(_e,{children:r.map(u)}),Object(j.jsx)(fe,{id:"sauces",children:"\u0421\u043e\u0443\u0441\u044b"}),Object(j.jsx)(_e,{children:i.map(u)}),Object(j.jsx)(fe,{id:"mains",children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(j.jsx)(_e,{children:a.map(u)})]})]})}):null},ye=n(35),Ne=n(99),Se=n.n(Ne),Ie=n(206),Ce=n(15),Ee=n.n(Ce),Te=n(34),ke=n.n(Te),we=function(e){var t=e.onClick;return Object(j.jsx)("div",{className:"".concat(ke.a.modalOverlay),onClick:t})},De=function(e){var t=e.headerClass,n=e.onClick,c=e.children;return Object(j.jsxs)("div",{className:"".concat(ke.a.modalHeader),children:[Object(j.jsx)("p",{className:t||"text text_type_main-large",children:c}),Object(j.jsx)(l.CloseIcon,{onClick:n,type:"primary"})]})},Be=function(e){var t=e.children;return Object(j.jsx)("div",{className:"".concat(ke.a.modalBody),children:t})},Re=function(e){var t=e.onClose,n=e.isVisible,r=e.box,i=e.header,s=e.headerClass,o=e.children;return Object(c.useEffect)((function(){var e;n&&(null===(e=document.getElementById("modal-container"))||void 0===e||e.focus())}),[n]),Object(c.useEffect)((function(){var e=function(e){"Escape"===e.key&&t()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[t]),Object(a.createPortal)(Object(j.jsx)(j.Fragment,{children:n&&Object(j.jsxs)("div",{id:"modal-container",children:[Object(j.jsx)(we,{onClick:t}),Object(j.jsxs)("div",{className:"".concat(ke.a.modal),style:{width:r.w,height:r.h,left:"calc(50% - ".concat(r.w," / 2)"),top:"calc(50% - ".concat(r.h," / 2)")},children:[Object(j.jsx)(De,{onClick:t,headerClass:s,children:i}),Object(j.jsx)(Be,{children:o})]})]})}),document.getElementById("modal-root"))};function Ae(){var e=f((function(e){return e.shop.order}));return e?Object(j.jsxs)("div",{className:"".concat(Ee.a.oderDetail),children:[Object(j.jsx)("p",{className:"".concat(Ee.a.orderId," text text_type_digits-large pb-8 pt-4"),children:e.order.number}),Object(j.jsx)("p",{className:"text text_type_main-medium",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(j.jsx)("div",{className:"".concat(Ee.a.doneImage)}),Object(j.jsx)("div",{className:"".concat(Ee.a.orderDone),children:Object(j.jsx)("div",{className:"".concat(Ee.a.large," pt"),children:Object(j.jsx)(l.CheckMarkIcon,{type:"primary"})})}),Object(j.jsx)("p",{className:"text text_type_main-default pb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("p",{className:"text text_type_main-medium",children:"\u0417\u0430\u043a\u0430\u0437 \u043e\u0444\u043e\u0440\u043c\u043b\u044f\u0435\u0442\u0441\u044f..."}),Object(j.jsx)("div",{className:"".concat(Ee.a.doneImage)})]})}var Pe="ADD_NEW_USER",Fe="ADD_TOKENS",Le="UPDATE_ACC_TOKEN",Ge="SET_USER_DATA",Me="SET_EMAIL_FOR_RESET_PASS",He="PASS_RESET_SUCCESS",Ue="DELETE_USER_DATA",ze="CHANGE_USER_NAME",We="CHANGE_USER_EMAIL",Je="CHANGE_USER_PASS";function qe(e,t){return function(n){(function(e,t){return H.apply(this,arguments)})(e,t).then((function(e){e&&e.success&&(localStorage.setItem("refreshToken",e.refreshToken),localStorage.setItem("accessToken",e.accessToken),localStorage.setItem("initTime",String(Date.now()/1e3)),console.log(localStorage),n({type:Fe}))})).catch((function(e){return console.log(e)}))}}function Ve(){return function(e){console.log(localStorage),function(e){return L.apply(this,arguments)}(localStorage.refreshToken).then((function(t){console.log("hey"),t&&t.success&&(localStorage.setItem("accessToken",t.accessToken),localStorage.setItem("initTime",String(Date.now()/1e3)),e({type:Le,accessToken:t.accessToken}))})).catch((function(e){return console.log(e)}))}}function Ke(){return function(e){(function(){return G.apply(this,arguments)})().then((function(t){t&&t.success&&e({type:Ge,user:t.user})})).catch((function(e){return console.log(e)}))}}function Qe(e){return function(t){(function(e){return U.apply(this,arguments)})(e).then((function(e){e&&e.success&&t({type:Ue})})).catch((function(e){return console.log(e)}))}}function Ze(e){return function(t){(function(e){return z.apply(this,arguments)})(e).then((function(e){e&&e.success&&t({type:Me})})).catch((function(e){return console.log(e)}))}}function Ye(e,t){return function(n){(function(e,t){return W.apply(this,arguments)})(e,t).then((function(e){e&&e.success&&n({type:He})})).catch((function(e){return console.log(e)}))}}function Xe(e,t,n){return function(c){(function(e,t,n){return J.apply(this,arguments)})(e,t,n).then((function(e){e&&e.success&&c({type:Pe,user:e.user,accessToken:e.accessToken,refreshToken:e.refreshToken})})).catch((function(e){return console.log(e)}))}}var $e=function(e){var t=e.size,n=e.price;t||(t="default");var c=Ee.a.default;return"medium"===t&&(c=Ee.a.medium),Object(j.jsxs)("div",{className:"".concat(Ee.a.price," ").concat(c),children:[Object(j.jsx)("p",{className:"text text_type_digits-".concat(t," mr-2"),children:n}),Object(j.jsx)(l.CurrencyIcon,{type:"primary"})]})},et=function(e){var t=e.index,n=e.moveIngredientHandler,r=e.type,a=e.name,i=e.price,s=e.image,o=e.uid,u=e.id,d=_(),p=Object(c.useRef)(null),b=Object(Ie.a)({accept:"selectedIngredient",hover:function(e,c){var r;if(p.current){var a=e.index,i=t;if(a!==i){var s=null===(r=p.current)||void 0===r?void 0:r.getBoundingClientRect(),o=(s.bottom-s.top)/2,l=c.getClientOffset().y-s.top;a<i&&l<o||a>i&&l>o||(n(a,i),e.index=i)}}}}),m=Object(O.a)(b,2)[1],h=Object(y.a)({type:"selectedIngredient",item:function(){return{id:o,index:t}},collect:function(e){return{handlerId:e.getHandlerId(),isDragging:e.isDragging()}}}),x=Object(O.a)(h,2),f=x[0],g=f.handlerId,v=f.isDragging,N=x[1],S=v?0:1,I=!1;return"top"===r||"bottom"===r?I=!0:m(p),N(p),Object(j.jsxs)("div",{className:"".concat(Ee.a.element),style:{opacity:S},ref:p,"data-handler-id":g,children:[Object(j.jsx)("div",{className:"",style:{visibility:"".concat(I?"hidden":"visible")},children:Object(j.jsx)(l.DragIcon,{type:"primary"})}),Object(j.jsx)(l.ConstructorElement,{text:a+("top"===r?" (\u0432\u0435\u0440\u0445)":"")+("bottom"===r?" (\u043d\u0438\u0437)":""),price:i,thumbnail:s,type:r,isLocked:I,handleClose:function(){d({type:Z,id:u}),d({type:ee,uid:o})}})]})},tt=function(){var e=_(),t=Object(o.g)(),n=Object(c.useState)(!1),r=Object(O.a)(n,2),a=r[0],i=r[1],s=function(e){return e.id},u=f((function(e){return e.shop.ingredients})),d=f((function(e){return e.shop.selectedBun})),p=f((function(e){return e.shop.selectedIngredients}));Object(c.useEffect)((function(){u.length||e(he())}),[e,u]),Object(c.useEffect)((function(){e(Ve())}),[e]);var b=function(e,t,n){var c=u.filter((function(t){return t._id===e.id}))[0];return Object(j.jsx)(et,{name:c.name,price:c.price,image:c.image,id:c._id,uid:e.uid,type:n,index:t,moveIngredientHandler:y},e.uid)},m=Object(Ie.a)({accept:"ingredient",drop:function(t){"bun"===u.filter((function(e){return e._id===t.id}))[0].type?(e({type:Y,id:d.id,count:0}),e({type:X,bunId:t.id}),e({type:Y,id:t.id,count:2})):(e({type:$,ingredient:Object(T.a)(Object(T.a)({},t),{},{uid:Number(new Date)})}),e({type:Q,id:t.id}))},collect:function(e){return{isHover:e.isOver()}}}),h=Object(O.a)(m,2),x=h[0].isHover,g=h[1],v=x?"4px double lightgreen":"2px double transparent",y=Object(c.useCallback)((function(t,n){var c=p[t],r=Se()(p,{$splice:[[t,1],[n,0,c]]});e({type:te,ingredients:r})}),[p,e]);return u.length&&0!==u.length?Object(j.jsxs)("div",{className:"".concat(Ee.a.containerMain),children:[p.length||d.id?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"pt-25 pb-10",style:{display:"flex",flexDirection:"column",gap:"10px",border:v},ref:g,children:[d.id&&[d].map((function(e){return b(e,-1,"top")})),Object(j.jsx)("div",{className:"".concat(Ee.a.optionalIngredients),style:{display:"flex",flexDirection:"column",gap:"10px"},children:p.map((function(e,t){return b(e,t,void 0)}))}),d.id&&[d].map((function(e){return b(e,-1,"bottom")}))]}),Object(j.jsxs)("div",{className:"".concat(Ee.a.totalInfo),children:[Object(j.jsx)($e,{price:[].concat(Object(ye.a)(p),[d,d]).map((function(e){return e.id?u.filter((function(t){return t._id===e.id}))[0].price:0})).reduce((function(e,t){return e+t})),size:"medium"}),Object(j.jsx)("div",{className:"pl-10",children:Object(j.jsx)(l.Button,{type:"primary",size:"large",onClick:function(){return d.id?function(){if(!localStorage.refreshToken)return t.push("/login");e(Oe([].concat(Object(ye.a)(p),[d,d]).map(s))),i(!0)}():null},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})]})]}):Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"mt-25 pt-30 pb-30",style:{display:"flex",flexDirection:"column",gap:"10px",border:v},ref:g,id:"drop-target",children:Object(j.jsx)("p",{className:"text text_type_main-medium pb-2 pl-10 pr-10 pt-2",style:{textAlign:"center"},children:"\u041f\u0435\u0440\u0435\u043d\u0435\u0441\u0438\u0442\u0435 \u0432 \u044d\u0442\u0443 \u043e\u0431\u043b\u0430\u0441\u0442\u044c \u0431\u0443\u043b\u043a\u0443 \u0438 \u0434\u0440\u0443\u0433\u0438\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b \u0434\u043b\u044f \u0431\u0443\u0440\u0433\u0435\u0440\u0430"})})}),a&&Object(j.jsx)(Re,{header:"",isVisible:a,onClose:function(){i(!1)},box:{w:"720px",h:"720px"},children:Object(j.jsx)(Ae,{})})]}):null},nt=n(100),ct=n.n(nt),rt=function(){var e=Object(o.j)().path;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(o.d,{children:Object(j.jsx)(o.b,{path:"".concat(e),exact:!0,children:Object(j.jsx)(m.a,{backend:h.a,children:Object(j.jsxs)("div",{className:"".concat(ct.a.containerMain),children:[Object(j.jsx)(ve,{}),Object(j.jsx)(tt,{})]})})})})})},at=n(71),it=n.n(at);var st=function(){var e=_(),t=Object(o.h)().state,n=f((function(e){return e.user}));Object(c.useEffect)((function(){n.user.name||0===localStorage.length||((!localStorage.initTime||Date.now()/1e3>Number(localStorage.initTime)+1200)&&e(Ve()),e(Ke()))}),[e,n]);var r=Object(c.useState)({type:"password",icon:"ShowIcon"}),a=Object(O.a)(r,2),i=a[0],u=a[1],d=Object(c.useState)(""),p=Object(O.a)(d,2),b=p[0],m=p[1],h=Object(c.useState)(""),x=Object(O.a)(h,2),g=x[0],v=x[1];return n.refreshToken||localStorage.refreshToken?Object(j.jsx)(o.a,{to:t?t.from:"/"}):Object(j.jsxs)("div",{className:"".concat(it.a.content),children:[Object(j.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u0445\u043e\u0434"}),Object(j.jsxs)("form",{action:"",onSubmit:function(t){t.preventDefault(),e(qe(b,g))},children:[Object(j.jsx)("div",{className:"pb-6 pt-6",children:Object(j.jsx)(l.Input,{type:"email",placeholder:"E-mail",value:b,onChange:function(e){return m(e.target.value)}})}),Object(j.jsx)("div",{className:"pb-6",children:Object(j.jsx)(l.Input,{type:i.type,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:i.icon,onIconClick:function(){u({type:"password"===i.type?"text":"password",icon:"ShowIcon"===i.icon?"HideIcon":"ShowIcon"})},value:g,onChange:function(e){return v(e.target.value)}})}),Object(j.jsx)("div",{className:it.a.innerContent,children:Object(j.jsx)(l.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})})]}),Object(j.jsxs)("p",{className:"text text_type_main-small text_color_inactive pt-20",children:["\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? ",Object(j.jsx)(s.b,{to:"./register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(j.jsxs)("p",{className:"text text_type_main-small text_color_inactive pt-4",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(j.jsx)(s.b,{to:"./forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},ot=function(){return Object(j.jsx)(st,{})},lt=n(72),ut=n.n(lt);var dt=function(){var e=_(),t=f((function(e){return e.user}));Object(c.useEffect)((function(){t.user.name||0===localStorage.length||((!localStorage.initTime||Date.now()/1e3>Number(localStorage.initTime)+1200)&&e(Ve()),e(Ke()))}),[e,t]);var n=Object(c.useState)({type:"password",icon:"ShowIcon"}),r=Object(O.a)(n,2),a=r[0],i=r[1],u=Object(c.useState)(""),d=Object(O.a)(u,2),p=d[0],b=d[1],m=Object(c.useState)(""),h=Object(O.a)(m,2),x=h[0],g=h[1],v=Object(c.useState)(""),y=Object(O.a)(v,2),N=y[0],S=y[1];return t.refreshToken||localStorage.refreshToken?Object(j.jsx)(o.a,{to:"/"}):Object(j.jsxs)("div",{className:"".concat(ut.a.content),children:[Object(j.jsx)("p",{className:"text text_type_main-medium",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(j.jsxs)("form",{action:"",onSubmit:function(t){t.preventDefault(),e(Xe(x,N,p))},id:"form",children:[Object(j.jsx)("div",{className:"pt-6",children:Object(j.jsx)(l.Input,{type:"text",placeholder:"\u0418\u043c\u044f",value:p,onChange:function(e){return b(e.target.value)}})}),Object(j.jsx)("div",{className:"pb-6 pt-6",children:Object(j.jsx)(l.Input,{type:"email",placeholder:"E-mail",value:x,onChange:function(e){return g(e.target.value)}})}),Object(j.jsx)("div",{className:"pb-6",children:Object(j.jsx)(l.Input,{type:a.type,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:a.icon,onIconClick:function(){i({type:"password"===a.type?"text":"password",icon:"ShowIcon"===a.icon?"HideIcon":"ShowIcon"})},value:N,onChange:function(e){return S(e.target.value)}})}),Object(j.jsx)("div",{className:ut.a.innerContent,children:Object(j.jsx)(l.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})})]}),Object(j.jsxs)("p",{className:"text text_type_main-small text_color_inactive pt-20",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(j.jsx)(s.b,{to:"./login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},jt=function(){return Object(j.jsx)(dt,{})},pt=n(73),bt=n.n(pt),mt=function(){var e=_(),t=f((function(e){return e.user})),n=Object(c.useState)(""),r=Object(O.a)(n,2),a=r[0],i=r[1];return Object(c.useEffect)((function(){t.user.name||0===localStorage.length||((!localStorage.initTime||Date.now()/1e3>Number(localStorage.initTime)+1200)&&e(Ve()),e(Ke()))}),[e,t]),t.refreshToken||localStorage.refreshToken?Object(j.jsx)(o.a,{to:"/"}):t.resetPass?Object(j.jsx)(o.a,{to:"/reset-password"}):Object(j.jsxs)("div",{className:"".concat(bt.a.content),children:[Object(j.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(j.jsxs)("form",{action:"",onSubmit:function(t){t.preventDefault(),e(Ze(a))},id:"form",children:[Object(j.jsx)("div",{className:"pt-6 pb-6",children:Object(j.jsx)(l.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",value:a,onChange:function(e){return i(e.target.value)}})}),Object(j.jsx)("div",{className:bt.a.innerContent,children:Object(j.jsx)(l.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})})]}),Object(j.jsxs)("p",{className:"text text_type_main-small text_color_inactive pt-20",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(j.jsx)(s.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},ht=function(){return Object(j.jsx)(mt,{})},Ot=n(74),xt=n.n(Ot);var ft=function(){var e=_(),t=f((function(e){return e.user}));Object(c.useEffect)((function(){t.user.name||0===localStorage.length||((!localStorage.initTime||Date.now()/1e3>Number(localStorage.initTime)+1200)&&e(Ve()),e(Ke()))}),[e,t]);var n=Object(c.useState)({type:"password",icon:"ShowIcon"}),r=Object(O.a)(n,2),a=r[0],i=r[1],u=Object(c.useState)(""),d=Object(O.a)(u,2),p=d[0],b=d[1],m=Object(c.useState)(""),h=Object(O.a)(m,2),x=h[0],g=h[1];return t.refreshToken||localStorage.refreshToken||!t.resetPass?Object(j.jsx)(o.a,{to:"/"}):Object(j.jsxs)("div",{className:"".concat(xt.a.content),children:[Object(j.jsx)("p",{className:"text text_type_main-medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(j.jsxs)("form",{action:"",onSubmit:function(t){t.preventDefault(),e(Ye(p,x))},id:"form",children:[Object(j.jsx)("div",{className:"pt-6",children:Object(j.jsx)(l.Input,{type:a.type,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",icon:a.icon,onIconClick:function(){i({type:"password"===a.type?"text":"password",icon:"ShowIcon"===a.icon?"HideIcon":"ShowIcon"})},value:p,onChange:function(e){return b(e.target.value)}})}),Object(j.jsx)("div",{className:"pt-6 pb-6",children:Object(j.jsx)(l.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",name:"name",value:x,onChange:function(e){return g(e.target.value)}})}),Object(j.jsx)("div",{className:xt.a.innerContent,children:Object(j.jsx)(l.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})})]}),Object(j.jsxs)("p",{className:"text text_type_main-small text_color_inactive pt-20",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(j.jsx)(s.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},_t=function(){return Object(j.jsx)(ft,{})},gt=n(13),vt=n.n(gt),yt=n(7),Nt=n.n(yt),St=function(e){var t=e.children;return Object(j.jsxs)("div",{className:"".concat(Nt.a.price),children:[Object(j.jsx)("p",{className:"text text_type_digits-default mr-2",children:t}),Object(j.jsx)(l.CurrencyIcon,{type:"primary"})]})},It=function(e){var t=e._id,n=e.time,c=new Date(n);return Object(j.jsxs)("div",{className:Nt.a.orderId,children:[Object(j.jsx)("p",{className:"text text_type_digits-default",style:{maxWidth:"258px"},children:t}),Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:c.toLocaleString("ru",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})})]})},Ct=function(e){var t=e.ingredientsId,n=_(),r=f((function(e){return e.shop.ingredients})),a=0;Object(c.useEffect)((function(){r.length||n(he())}),[n,r]);return r.length?Object(j.jsxs)("div",{className:Nt.a.orderId,children:[Object(j.jsx)("div",{className:Nt.a.ingredients,children:t.map((function(e,n){var c=r.filter((function(t){return t._id===e}))[0],i=t.length>6?t.length*Math.floor(t.length/5):0;return c?(a+=c.price,Object(j.jsx)("div",{className:Nt.a.ingredientPreview,style:{left:"".concat(-(24+i)*n,"px"),zIndex:100-n},children:Object(j.jsx)("img",{className:Nt.a.ingredientImage,src:c.image,alt:c.name})},n)):null}))}),Object(j.jsx)(St,{children:a})]}):null},Et=function(e){var t=e.path,n=e.location,c=e._id,r=e.number,a=e.ingredients,i=e.time,o=e.name,l=e.orders;return Object(j.jsx)(s.b,{to:{pathname:"".concat(t,"/").concat(c),state:{modal:!0,background:n,_id:c,number:r,orders:l}},children:Object(j.jsxs)("div",{className:Nt.a.cardOrder,children:[Object(j.jsx)(It,{_id:"#".concat(r),time:i}),Object(j.jsx)("p",{className:"text text_type_main-medium pr-6 pl-6",children:o}),Object(j.jsx)(Ct,{ingredientsId:a})]})})},Tt=function(e){var t=e.path,n=e.orders,c=e.location;return Object(j.jsx)("div",{className:Nt.a.orders,children:null===n||void 0===n?void 0:n.map((function(e){return Object(j.jsx)(Et,{path:t,location:c,_id:e._id,number:e.number,ingredients:e.ingredients,time:e.createdAt,name:e.name,orders:n},e._id)}))})},kt=function(e){var t=e.linkTo,n=e.exact,c=e.onClick,r=e.children;return Object(j.jsx)(s.c,{to:t,className:"".concat(vt.a.navigationLink),activeClassName:vt.a.chosen,exact:n,onClick:c,children:Object(j.jsx)("div",{className:"".concat(vt.a.menuItem),children:Object(j.jsx)("p",{className:"text text_type_main-medium ".concat(vt.a.name),children:r})})})},wt=function(e){var t=e.path,n=_(),r=Object(o.h)(),a=f((function(e){return e.shop.messages})),i=a.length?a[0]:[],u=f((function(e){return e.user})),d=Object(c.useCallback)((function(){(function(){if(!localStorage.initTime)return!0;var e=Number(localStorage.initTime)+1200;return Date.now()/1e3>e})()&&n(Ve()),n(Ke())}),[n]);Object(c.useEffect)((function(){u.user.name||0===localStorage.length||d()}),[u,d]),Object(c.useEffect)((function(){var e=localStorage.accessToken?"?token=".concat(localStorage.accessToken.split(" ")[1]):"",t="wss://norma.nomoreparties.space/orders".concat(e);return n({type:ue,wsUrl:t}),function(){n({type:pe})}}),[n]);var p=Object(c.useState)("profile"),b=Object(O.a)(p,2),m=b[0],h=b[1];return localStorage.refreshToken?(console.log(i,a),Object(j.jsxs)("div",{className:"".concat(vt.a.content),children:[Object(j.jsxs)("div",{className:vt.a.leftBlock,children:[Object(j.jsxs)("div",{className:vt.a.menu,children:[Object(j.jsx)(kt,{exact:!0,linkTo:"/profile",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(j.jsx)(kt,{exact:!1,linkTo:"/profile/orders",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(j.jsx)(s.b,{to:"#",onClick:function(){h("exit"),n(Qe(localStorage.refreshToken))},children:Object(j.jsx)("div",{className:"".concat(vt.a.menuItem),children:Object(j.jsx)("p",{className:"text text_type_main-medium ".concat("exit"===m?"":"text_color_inactive"),children:"\u0412\u044b\u0445\u043e\u0434"})})})]}),Object(j.jsx)("div",{className:"pt-20",children:"/profile"===r.pathname?Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}):Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})})]}),Object(j.jsx)("div",{className:vt.a.rightBlock,children:Object(j.jsxs)(o.d,{children:[Object(j.jsxs)(o.b,{path:"".concat(t),exact:!0,children:[Object(j.jsxs)("form",{action:"",onSubmit:function(e){e.preventDefault(),function(e){M.apply(this,arguments)}(u.user)},className:"".concat(vt.a.innerContent),id:"form",children:[Object(j.jsx)("div",{className:vt.a.longInput,children:Object(j.jsx)(l.Input,{type:"text",placeholder:"\u0418\u043c\u044f",icon:"EditIcon",size:"default",value:u.user.name,onChange:function(e){return n({type:ze,name:e.target.value})}})}),Object(j.jsx)("div",{className:"".concat(vt.a.longInput," pb-6 pt-6"),children:Object(j.jsx)(l.Input,{type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",icon:"EditIcon",value:u.user.email,onChange:function(e){return n({type:We,email:e.target.value})}})}),Object(j.jsx)("div",{className:vt.a.longInput,children:Object(j.jsx)(l.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:"EditIcon",value:u.user.password,onChange:function(e){return n({type:Je,password:e.target.value})}})}),Object(j.jsx)("div",{className:vt.a.saveButton,children:Object(j.jsx)(l.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),Object(j.jsx)("div",{className:vt.a.cancelButton,children:Object(j.jsx)(l.Button,{type:"secondary",size:"medium",onClick:function(){return d()},children:"\u041e\u0442\u043c\u0435\u043d\u0430"})})]}),Object(j.jsx)(o.b,{path:"".concat(t,"/orders"),children:Object(j.jsx)(Tt,{path:"".concat(t,"/orders"),orders:i.orders,location:r})})]})})]})):Object(j.jsx)(o.a,{to:"/login"})},Dt=function(){var e=Object(o.j)().path,t=Object(o.h)(),n=Object(o.g)(),c=!(!t.state||!t.state.modal||"POP"===n.action),r=t.state?t.state.orders:[],a=t.state?t.state.number:void 0;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(o.d,{location:c?{pathname:e}:t,children:[Object(j.jsx)(o.b,{path:"".concat(e),exact:!0,children:Object(j.jsx)(wt,{path:e})}),Object(j.jsx)(o.b,{path:"".concat(e,"/orders"),exact:!0,children:Object(j.jsx)(wt,{path:e})}),Object(j.jsx)(o.b,{path:"".concat(e,"/orders/:id"),exact:!0,children:Object(j.jsx)(qt,{orders:r,number:a})})]})})},Bt=function(e){var t=e.nutritionType,n=e.nutritionValue,c="";switch(t){case"calories":c="\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b";break;case"proteins":c="\u0411\u0435\u043b\u043a\u0438, \u0433";break;case"fat":c="\u0416\u0438\u0440\u044b, \u0433";break;case"carbohydrates":c="\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433";break;default:c=""}return Object(j.jsxs)("div",{className:"".concat(v.a.nutritionElement," text_color_inactive"),children:[Object(j.jsx)("p",{className:"text  text_type_main-default pb-2",children:c}),Object(j.jsx)("p",{className:"text text_type_digits-default ",children:n})]})};function Rt(){var e=_(),t=Object(o.i)().id,n=f((function(e){return e.shop.ingredients}));Object(c.useEffect)((function(){n.length||e(he())}),[e,n]);var r=n.filter((function(e){return e._id===t}))[0];return r?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(N,{image:r.image_large,alt:r.name}),Object(j.jsx)(S,{name:r.name,size:"medium",box:"pb-8 pt-4"}),Object(j.jsxs)("div",{className:"".concat(v.a.nutritionDetails," pb-15"),children:[Object(j.jsx)(Bt,{nutritionType:"calories",nutritionValue:r.calories}),Object(j.jsx)(Bt,{nutritionType:"proteins",nutritionValue:r.proteins}),Object(j.jsx)(Bt,{nutritionType:"fat",nutritionValue:r.fat}),Object(j.jsx)(Bt,{nutritionType:"carbohydrates",nutritionValue:r.carbohydrates})]})]}):null}var At=n(101),Pt=n.n(At),Ft=function(){return Object(j.jsx)("div",{className:"".concat(Pt.a.ingredient),children:Object(j.jsx)(Rt,{})})},Lt=function(e){var t=e.text,n=e.number;return Object(j.jsxs)("div",{className:Nt.a.completed,children:[Object(j.jsx)("p",{className:"text text_type_main-medium",children:t}),Object(j.jsx)("p",{className:"".concat(Nt.a.glow," text text_type_digits-large"),children:n})]})},Gt=function(e){var t=e.path,n=_(),r=Object(o.h)(),a=f((function(e){return e.shop.messages})),i=a.length?a[0]:[],s=i.orders,l=i.total,u=i.totalToday;if(Object(c.useEffect)((function(){return n({type:ue,wsUrl:"wss://norma.nomoreparties.space/orders/all"}),function(){n({type:pe})}}),[n]),!(null===s||void 0===s?void 0:s.length))return null;var d=s.filter((function(e){return"done"===e.status})),p=s.filter((function(e){return"pending"===e.status})),b=function(e,t){return Object(j.jsx)("p",{className:"text text_type_digits-default pb-2 pr-1",children:"".concat(e.number)},t)};return Object(j.jsxs)("div",{className:Nt.a.content,children:[Object(j.jsxs)("div",{className:Nt.a.leftBlock,children:[Object(j.jsx)("p",{className:"text text_type_main-large pt-10 pb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(j.jsx)(Tt,{path:t,location:r,orders:s})]}),Object(j.jsxs)("div",{className:Nt.a.rightBlock,children:[Object(j.jsxs)("div",{className:Nt.a.ordersBoard,children:[Object(j.jsxs)("div",{className:"mr-10",children:[Object(j.jsx)("p",{className:"text text_type_main-medium pb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(j.jsx)("div",{className:"".concat(Nt.a.ordersList),style:{color:"#00CCCC"},children:d.map(b)})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{className:"text text_type_main-medium pb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(j.jsx)("div",{className:Nt.a.ordersList,style:{color:"#00CCCC"},children:p.map(b)})]})]}),Object(j.jsx)(Lt,{text:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0451 \u0432\u0440\u0435\u043c\u044f:",number:l}),Object(j.jsx)(Lt,{text:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:",number:u})]})]})},Mt=function(){var e=Object(o.j)().path;return Object(j.jsx)(Gt,{path:e})},Ht=function(e){var t=e.children;return Object(j.jsxs)("div",{className:"".concat(Nt.a.price),children:[Object(j.jsx)("p",{className:"text text_type_digits-default mr-2",children:t}),Object(j.jsx)(l.CurrencyIcon,{type:"primary"})]})},Ut=function(e){var t=e.name,n=e.count,c=e.price,r=e.image;return Object(j.jsxs)("div",{className:Nt.a.ingredientRow,children:[Object(j.jsxs)("div",{className:Nt.a.ingredientImageName,children:[Object(j.jsx)("div",{className:"".concat(Nt.a.ingredientPreview," mr-4"),children:Object(j.jsx)("img",{className:Nt.a.ingredientImage,src:r,alt:t})}),Object(j.jsx)("p",{className:"text text_type_main-default mr-4",children:t})]}),Object(j.jsx)(Ht,{children:"".concat(n," x ").concat(c)})]})},zt=function(e){var t,n=e._id,r=e.orders,a=_(),i=f((function(e){return e.shop.orders}));r||(r=i);var s=f((function(e){return e.shop.ingredients}));if(Object(c.useEffect)((function(){s.length||a(he())}),[a,s]),Object(c.useEffect)((function(){var e;(null===(e=r)||void 0===e?void 0:e.length)||a(xe())}),[a,r]),!(null===(t=r)||void 0===t?void 0:t.length)||!s.length||!n)return null;var o=r.filter((function(e){return e._id===n}))[0],l=o.name.length>84?"default":"medium",u={created:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",done:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",pending:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"}[o.status],d=0,p=o.ingredients.reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{}),b=new Date(o.createdAt);return Object(j.jsxs)("div",{className:Nt.a.orderContainer,children:[Object(j.jsxs)("div",{style:{textAlign:"left",width:"640px"},children:[Object(j.jsx)("p",{className:"text text_type_main-".concat(l," pb-3"),children:o.name}),Object(j.jsx)("p",{className:"text text_type_main-default pb-15 ",style:{color:"#00CCCC"},children:u}),Object(j.jsx)("p",{className:"text text_type_main-medium pb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"})]}),Object(j.jsx)("div",{className:Nt.a.ingredientsColumn,children:Object.keys(p).map((function(e){var t=s.filter((function(t){return t._id===e}))[0];return d+=t.price,Object(j.jsx)(Ut,{name:t.name,count:p[e],price:t.price,image:t.image},t._id)}))}),Object(j.jsxs)("div",{className:Nt.a.orderTimePrice,children:[Object(j.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:b.toLocaleString("ru",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}),Object(j.jsx)(Ht,{children:d})]})]})},Wt=n(102),Jt=n.n(Wt),qt=function(e){var t=e.orders,n=e.number,c=Object(o.i)().id;return Object(j.jsxs)("div",{className:Jt.a.orderContainer,children:[Object(j.jsxs)("p",{className:"text text_type_digits-default pb-10",children:["#",n]}),Object(j.jsx)(zt,{_id:c,orders:t})]})},Vt=n(105),Kt=["children"],Qt=function(e){var t=e.children,n=Object(Vt.a)(e,Kt);return Object(j.jsx)(o.b,Object(T.a)(Object(T.a)({},n),{},{render:function(e){var n=e.location;return localStorage.refreshToken?t:Object(j.jsx)(o.a,{to:{pathname:"/login",state:{from:n}}})}}))};var Zt=function(){var e=Object(o.g)(),t=Object(o.h)(),n=function(){t.state.modal=!1,e.push("/")},c=!(!t.state||!t.state.modal||"POP"===e.action),r="PUSH"===e.action&&t.state&&t.state.background,a=t.state?t.state.orders:[],i=t.state?t.state.number:void 0;return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(b,{}),Object(j.jsxs)(o.d,{location:r||t,children:[Object(j.jsx)(o.b,{path:"/login",children:Object(j.jsx)(ot,{})}),Object(j.jsx)(o.b,{path:"/register",children:Object(j.jsx)(jt,{})}),Object(j.jsx)(o.b,{path:"/forgot-password",children:Object(j.jsx)(ht,{})}),Object(j.jsx)(o.b,{path:"/reset-password",children:Object(j.jsx)(_t,{})}),Object(j.jsx)(o.b,{path:"/feed",exact:!0,children:Object(j.jsx)(Mt,{})}),Object(j.jsx)(o.b,{path:"/feed/:id",exact:!0,children:Object(j.jsx)(qt,{orders:a,number:i})}),Object(j.jsx)(Qt,{path:"/profile",children:Object(j.jsx)(Dt,{})}),Object(j.jsx)(o.b,{path:"/ingredients/:id",children:Object(j.jsx)(Ft,{})}),Object(j.jsx)(o.b,{path:"/",children:Object(j.jsx)(rt,{})})]}),c?Object(j.jsx)(o.b,{path:"/ingredients/:id",children:Object(j.jsx)(Re,{header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",isVisible:!0,onClose:n,box:{w:"720px",h:"540px"},children:Object(j.jsx)(Rt,{})})}):null,c?Object(j.jsx)(o.b,{path:"".concat(r.pathname,"/:id"),children:Object(j.jsx)(Re,{header:"#".concat(i),headerClass:"text text_type_digits-default",isVisible:!0,onClose:n,box:{w:"720px",h:"720px"},children:Object(j.jsx)(zt,{_id:t.state._id,orders:a})})}):null]})},Yt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,207)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},Xt=n(27),$t={ingredients:[],ingredientsRequest:!1,ingredientsFailed:!1,selectedBun:{id:null,uid:0},selectedIngredients:[],selectedIngredientsRequest:!1,selectedIngredientsFailed:!1,currentIngredient:{},order:null,orderRequest:!1,orderFailed:!1,orders:[],totalOrders:null,todayOrders:null,ordersRequest:!1,ordersFailed:!1,wsConnected:!1,messages:[],error:""},en={user:{name:"",email:"",password:""},accessToken:null,refreshToken:null,resetPass:!1},tn=Object(Xt.combineReducers)({shop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return Object(T.a)(Object(T.a)({},e),{},{ingredientsRequest:!0});case V:return Object(T.a)(Object(T.a)({},e),{},{ingredientsRequest:!1,ingredientsFailed:!1,ingredients:t.ingredients});case K:return Object(T.a)(Object(T.a)({},e),{},{ingredientsRequest:!1,ingredientsFailed:!0});case Q:return Object(T.a)(Object(T.a)({},e),{},{ingredients:e.ingredients.map((function(e){return e._id===t.id?Object(T.a)(Object(T.a)({},e),{},{__v:e.__v+1}):e}))});case Z:return Object(T.a)(Object(T.a)({},e),{},{ingredients:e.ingredients.map((function(e){return e._id===t.id?Object(T.a)(Object(T.a)({},e),{},{__v:e.__v-1}):e}))});case Y:return Object(T.a)(Object(T.a)({},e),{},{ingredients:e.ingredients.map((function(e){return e._id===t.id?Object(T.a)(Object(T.a)({},e),{},{__v:t.count}):e}))});case X:return Object(T.a)(Object(T.a)({},e),{},{selectedBun:Object(T.a)(Object(T.a)({},e.selectedBun),{},{id:t.bunId})});case $:return Object(T.a)(Object(T.a)({},e),{},{selectedIngredients:[].concat(Object(ye.a)(e.selectedIngredients),[t.ingredient])});case ee:return Object(T.a)(Object(T.a)({},e),{},{selectedIngredients:e.selectedIngredients.filter((function(e){return e.uid!==t.uid}))});case te:return Object(T.a)(Object(T.a)({},e),{},{selectedIngredients:t.ingredients});case ne:return Object(T.a)(Object(T.a)({},e),{},{currentIngredient:t.ingredient});case ce:return Object(T.a)(Object(T.a)({},e),{},{currentIngredient:{}});case re:return Object(T.a)(Object(T.a)({},e),{},{orderRequest:!0});case ae:return Object(T.a)(Object(T.a)({},e),{},{orderRequest:!1,orderFailed:!1,order:t.order});case ie:return Object(T.a)(Object(T.a)({},e),{},{orderRequest:!1,orderFailed:!0});case se:return Object(T.a)(Object(T.a)({},e),{},{ordersRequest:!0});case oe:return Object(T.a)(Object(T.a)({},e),{},{ordersRequest:!1,ordersFailed:!1,orders:t.orders,totalOrders:t.total,todayOrders:t.today});case le:return Object(T.a)(Object(T.a)({},e),{},{ordersRequest:!1,ordersFailed:!0});case de:return Object(T.a)(Object(T.a)({},e),{},{error:null,wsConnected:!0});case je:return Object(T.a)(Object(T.a)({},e),{},{error:t.payload,wsConnected:!1});case be:return Object(T.a)(Object(T.a)({},e),{},{error:null,wsConnected:!1});case me:return Object(T.a)(Object(T.a)({},e),{},{error:null,messages:e.messages.length?[].concat(Object(ye.a)(e.messages),[t.payload]):[t.payload]});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pe:return Object(T.a)(Object(T.a)({},e),{},{user:Object(T.a)(Object(T.a)({},e.user),t.user),accessToken:t.accessToken,refreshToken:t.refreshToken});case Fe:return Object(T.a)(Object(T.a)({},e),{},{refreshToken:localStorage.refreshToken,accessToken:localStorage.accessToken});case Le:return Object(T.a)(Object(T.a)({},e),{},{accessToken:t.accessToken});case Ge:return Object(T.a)(Object(T.a)({},e),{},{user:Object(T.a)(Object(T.a)({},e.user),t.user)});case Ue:return localStorage.clear(),en;case ze:return Object(T.a)(Object(T.a)({},e),{},{user:Object(T.a)(Object(T.a)({},e.user),{},{name:t.name})});case We:return Object(T.a)(Object(T.a)({},e),{},{user:Object(T.a)(Object(T.a)({},e.user),{},{email:t.email})});case Je:return Object(T.a)(Object(T.a)({},e),{},{user:Object(T.a)(Object(T.a)({},e.user),{},{password:t.password})});case Me:return Object(T.a)(Object(T.a)({},e),{},{resetPass:!0});case He:return Object(T.a)(Object(T.a)({},e),{},{resetPass:!1});default:return e}}}),nn=n(75),cn=n(103),rn=("object"===typeof window&&nn.composeWithDevTools?Object(nn.composeWithDevTools)({}):Xt.compose)(Object(Xt.applyMiddleware)(cn.a,(function(e){var t=null;return function(n){return function(c){var r,a=e.dispatch,i=c.type,s=c.payload,o=c.wsUrl;if(i===ue&&(t=new WebSocket(o)),i===pe&&(null===(r=t)||void 0===r||r.close(1e3,"Page with socket was closed by user"),console.log("closed")),t&&(t.onopen=function(e){a({type:de,payload:e})},t.onerror=function(e){a({type:je,payload:e})},t.onmessage=function(e){var t=e.data,n=JSON.parse(t);console.log(n),a({type:me,payload:n})},t.onclose=function(e){a({type:be,payload:e})},"WS_SEND_MESSAGE"===i)){var l=s;t.send(JSON.stringify(l))}n(c)}}}))),an=Object(Xt.createStore)(tn,rn);i.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(x.a,{store:an,children:Object(j.jsx)(s.a,{basename:"/ya-react-burger",children:Object(j.jsx)(Zt,{})})})}),document.getElementById("root")),Yt()},25:function(e,t,n){e.exports={navigationPanel:"AppHeader_navigationPanel__MedkU",content:"AppHeader_content__CgdFZ",navigation:"AppHeader_navigation__L59ab",navGroup:"AppHeader_navGroup__L4NQO",navigationLink:"AppHeader_navigationLink__1quIk",chosen:"AppHeader_chosen__oRSJR",icon24:"AppHeader_icon24__x-rqw",name:"AppHeader_name__fF3zj",logo:"AppHeader_logo__1HCWP"}},34:function(e,t,n){e.exports={modal:"Modal_modal__39VXp",modalHeader:"Modal_modalHeader__3iK_x",modalBody:"Modal_modalBody__2aWW4",modalOverlay:"Modal_modalOverlay__2Ifa0"}},7:function(e,t,n){e.exports={content:"Feed_content__3-KLW",leftBlock:"Feed_leftBlock__8OEMi",rightBlock:"Feed_rightBlock__DU3Th",orders:"Feed_orders__kYH1s",cardOrder:"Feed_cardOrder__3xLhh",orderId:"Feed_orderId__1OWFQ",ingredients:"Feed_ingredients__2kHni",ingredientPreview:"Feed_ingredientPreview__30VJW",ingredientImage:"Feed_ingredientImage__3ZjBI",price:"Feed_price__2mkzO",ordersBoard:"Feed_ordersBoard__2rMSW",ordersList:"Feed_ordersList__29yz-",completed:"Feed_completed__1iv1N",glow:"Feed_glow__3N_bs",orderContainer:"Feed_orderContainer__YY8DT",ingredientsColumn:"Feed_ingredientsColumn__3xnIm",ingredientRow:"Feed_ingredientRow__1k62L",ingredientImageName:"Feed_ingredientImageName__2-zG6",orderTimePrice:"Feed_orderTimePrice__39sKo"}},71:function(e,t,n){e.exports={content:"Auth_content__2Fxnl",innerContent:"Auth_innerContent__2Duz3"}},72:function(e,t,n){e.exports={content:"Register_content__27XHP",innerContent:"Register_innerContent__2ZbUw"}},73:function(e,t,n){e.exports={content:"ForgotPass_content__2gAlA",innerContent:"ForgotPass_innerContent__3fh_V"}},74:function(e,t,n){e.exports={content:"ResetPass_content__1DcKP",innerContent:"ResetPass_innerContent__L3FpN"}}},[[199,1,2]]]);
//# sourceMappingURL=main.a9fd0b5a.chunk.js.map