{"version":3,"sources":["pages/Constructor.module.css","pages/Ingredient.module.css","pages/Order.module.css","components/Profile/Profile.module.css","components/BurgerIngredients/BurgerIngredients.module.css","components/BurgerConstructor/BurgerConstructor.module.css","components/AppHeader/AppHeader.tsx","services/types/hooks.ts","components/BurgerIngredients/Illustration.tsx","components/BurgerIngredients/Name.tsx","components/BurgerIngredients/Ingredient.tsx","utils/burger-api.ts","services/actions/shop.ts","components/BurgerIngredients/BurgerIngredients.tsx","components/Modal/ModalOverlay.tsx","components/Modal/Modal.tsx","components/BurgerConstructor/OrderDetails.tsx","services/actions/user.ts","components/BurgerConstructor/BurgerConstructor.tsx","pages/Constructor.tsx","components/Auth/Auth.tsx","pages/Login.tsx","components/Register/Register.tsx","pages/Register.tsx","components/ForgotPass/ForgotPass.tsx","pages/ForgotPassword.tsx","components/ResetPass/ResetPass.tsx","pages/ResetPassword.tsx","components/Feed/OrderList.tsx","components/Profile/Profile.tsx","pages/Profile.tsx","components/BurgerIngredients/IngredientDetails.tsx","pages/Ingredient.tsx","components/Feed/Feed.tsx","pages/Feed.tsx","components/Feed/OrderDetails.tsx","pages/Order.tsx","components/ProtectedRoute/ProtectedRoute.tsx","components/App/App.tsx","reportWebVitals.ts","services/reducers/shop.ts","services/reducers/user.ts","services/reducers/index.ts","index.tsx","services/middleware/socketMiddleware.ts","components/AppHeader/AppHeader.module.css","components/Modal/Modal.module.css","components/Feed/Feed.module.css","components/Auth/Auth.module.css","components/Register/Register.module.css","components/ForgotPass/ForgotPass.module.css","components/ResetPass/ResetPass.module.css"],"names":["module","exports","NavItem","icon","exact","linkTo","children","to","className","styles","navigationLink","activeClassName","chosen","icon24","name","AppHeader","navigationPanel","content","navigation","navGroup","type","logo","useSelector","selector","useDispatch","dispatch","Illustration","image","alt","illustration","src","Name","box","size","Price","price","Counter","count","counter","style","visibility","Ingredient","id","useDrag","item","dragRef","ref","BURGER_API_URL","checkReponse","res","ok","json","then","err","Promise","reject","a","fetch","data","ingredientsId","method","headers","localStorage","accessToken","body","JSON","stringify","ingredients","catch","e","console","log","token","userData","email","pass","password","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_FAILED","INCREASE_INGREDIENT_COUNT","DECREASE_INGREDIENT_COUNT","SET_INGREDIENT_COUNT","CHANGE_SELECTED_BUN","ADD_SELECTED_INGREDIENT","DELETE_SELECTED_INGREDIENT","SET_SELECTED_INGREDIENTS","SET_INGREDIENT_MODAL","DELETE_INGREDIENT_MODAL","GET_ORDER_REQUEST","GET_ORDER_SUCCESS","GET_ORDER_FAILED","GET_ORDERS_REQUEST","GET_ORDERS_SUCCESS","GET_ORDERS_FAILED","WS_CONNECTION_START","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSE","WS_CONNECTION_CLOSED","WS_GET_MESSAGE","getItems","getIngredients","success","error","message","getOrder","postOrder","order","bunId","getOrdersFeed","getOrders","orders","total","today","totalToday","Headline","width","Row","columnsPuns","textAlign","Col","onClick","col","BurgerIngredients","location","useLocation","state","shop","useEffect","length","buns","useMemo","filter","mains","sauces","dataToIngredient","handleOpenModal","pathname","_id","modal","background","__v","ingredient","useState","current","setCurrent","setTab","tab","element","document","getElementById","scrollIntoView","behavior","containerMain","display","value","active","onScroll","tabs","headings","map","scrollPosition","scrollTop","forEach","heading","iter","headingPosition","offsetTop","ModalOverlay","modalOverlay","ModalHeader","headerClass","modalHeader","ModalBody","modalBody","Modal","onClose","isVisible","header","focus","closeByEscape","key","addEventListener","removeEventListener","createPortal","w","height","h","left","top","OrderDetails","orderData","oderDetail","orderId","number","doneImage","orderDone","large","ADD_NEW_USER","ADD_TOKENS","UPDATE_ACC_TOKEN","SET_USER_DATA","RESET_PASS_CODE_SENDED","PASS_RESET_SUCCESS","DELETE_USER_DATA","CHANGE_USER_NAME","CHANGE_USER_EMAIL","CHANGE_USER_PASS","addTokens","disptach","postAuth","setItem","refreshToken","String","Date","now","updateAccToken","getAccToken","getUserData","getUser","user","deleteUserData","postLogout","sendResetPassCode","postResetPassCode","setNewPass","code","postNewPass","addNewUser","postNewUser","iconSize","default","medium","ListElement","index","moveIngredientHandler","uid","useRef","useDrop","accept","hover","monitor","dragIndex","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","bottom","hoverClientY","getClientOffset","y","drop","collect","handlerId","getHandlerId","isDragging","drag","opacity","isLocked","text","thumbnail","handleClose","BurgerConstructor","history","useHistory","modalVisible","setVisibility","getIngredientsId","selectedBun","selectedIngredients","ingredientId","position","ingr","Number","isHover","isOver","dropTarget","borderColor","useCallback","draggableItem","newSelectedIngredients","update","$splice","flexDirection","gap","border","bun","optionalIngredients","undefined","totalInfo","reduce","acc","val","push","ConstructorPage","path","useRouteMatch","DndProvider","backend","HTML5Backend","Auth","redirectState","initTime","passParams","setPassParams","valueEmail","setValueEmail","valuePass","setValuePass","from","action","onSubmit","event","preventDefault","placeholder","onChange","target","onIconClick","innerContent","LoginPage","Register","valueName","setValueName","RegisterPage","ForgotPass","resetPass","ForgotPasswordPage","ResetPass","valueCode","setValueCode","ResetPasswordPage","OrderIdTime","time","goodLookTime","maxWidth","toLocaleString","year","month","day","hour","minute","second","OrderIngredients","widthRegulator","Math","floor","ingredientPreview","zIndex","ingredientImage","CardOrder","cardOrder","OrderList","createdAt","menuItem","Profile","messages","ordersData","tokenDieTime","isTokenExpired","split","wsUrlUserOrders","wsUrl","activePage","setActivePage","leftBlock","menu","rightBlock","updateUser","longInput","saveButton","cancelButton","ProfilePage","isModal","NutritionDetail","nutritionType","nutritionValue","nutritionElement","IngredientDetails","useParams","image_large","nutritionDetails","calories","proteins","fat","carbohydrates","IngredientPage","Completed","completed","glow","Feed","doneOrders","status","inProgressOrders","dataToNumberList","ordersBoard","ordersList","color","FeedPage","IngredientsRow","ingredientRow","ingredientImageName","allOrders","ord","nameSize","uniqueIngredients","occurrence","orderContainer","ingredientsColumn","Object","keys","orderTimePrice","OrderPage","ProtectedRoute","rest","render","App","handleCloseModal","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","ingredientsRequest","ingredientsFailed","selectedIngredientsRequest","selectedIngredientsFailed","currentIngredient","orderRequest","orderFailed","totalOrders","todayOrders","ordersRequest","ordersFailed","wsConnected","rootReducer","combineReducers","payload","clear","enhancer","window","composeWithDevTools","compose","applyMiddleware","thunk","store","socket","next","WebSocket","close","onopen","onerror","onmessage","parsedData","parse","onclose","send","createStore","ReactDOM","StrictMode","basename"],"mappings":"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","file":"static/js/main.a9fd0b5a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"containerMain\":\"Constructor_containerMain__1W1gz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient\":\"Ingredient_ingredient__2meZJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orderContainer\":\"Order_orderContainer__3OICI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Profile_content__E8uhT\",\"leftBlock\":\"Profile_leftBlock__3tCOh\",\"menu\":\"Profile_menu__2k3D6\",\"rightBlock\":\"Profile_rightBlock__IzDFD\",\"longInput\":\"Profile_longInput__12pHO\",\"saveButton\":\"Profile_saveButton__2zb4r\",\"cancelButton\":\"Profile_cancelButton__1GilK\",\"menuItem\":\"Profile_menuItem__3RTO6\",\"navigationLink\":\"Profile_navigationLink__3llqU\",\"chosen\":\"Profile_chosen__k-J7v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"containerMain\":\"BurgerIngredients_containerMain__ePbQ2\",\"columnsPuns\":\"BurgerIngredients_columnsPuns__14-Eq\",\"col\":\"BurgerIngredients_col__2TY3O\",\"break\":\"BurgerIngredients_break__23mJC\",\"illustration\":\"BurgerIngredients_illustration__1Jfaa\",\"price\":\"BurgerIngredients_price__pcGcu\",\"name\":\"BurgerIngredients_name__15sJx\",\"counter\":\"BurgerIngredients_counter__2oy_9\",\"ingredients\":\"BurgerIngredients_ingredients__3Hd3I\",\"nutritionDetails\":\"BurgerIngredients_nutritionDetails__3o0rz\",\"nutritionElement\":\"BurgerIngredients_nutritionElement__1oUPi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"containerMain\":\"BurgerConstructor_containerMain__1bMA3\",\"totalInfo\":\"BurgerConstructor_totalInfo__36Lda\",\"price\":\"BurgerConstructor_price__3b11A\",\"default\":\"BurgerConstructor_default__2Wj_n\",\"medium\":\"BurgerConstructor_medium__3MJgG\",\"large\":\"BurgerConstructor_large__3XJkP\",\"pentaSmall\":\"BurgerConstructor_pentaSmall__TiyiV\",\"pentaMedium\":\"BurgerConstructor_pentaMedium__2WTRv\",\"pentaLarge\":\"BurgerConstructor_pentaLarge__16_Ll\",\"element\":\"BurgerConstructor_element__DgjSF\",\"optionalIngredients\":\"BurgerConstructor_optionalIngredients__EgAFZ\",\"orderId\":\"BurgerConstructor_orderId__39L70\",\"orderDetail\":\"BurgerConstructor_orderDetail__1oEAS\",\"orderDone\":\"BurgerConstructor_orderDone__7ekvr\",\"doneImage\":\"BurgerConstructor_doneImage__3GoZ7\"};","import React, { FunctionComponent } from 'react';\r\nimport { Link, NavLink } from 'react-router-dom';\r\nimport {ListIcon, Logo, BurgerIcon, ProfileIcon} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './AppHeader.module.css';\r\nimport { INavItem } from '../../services/types/components';\r\n\r\nconst NavItem: FunctionComponent<INavItem> = ({icon, exact, linkTo, children}) => {\r\n  return (\r\n    <NavLink to={linkTo} className={`${styles.navigationLink}`} activeClassName={styles.chosen} exact={exact}>\r\n      <div className={`${styles.icon24} `}>\r\n        {icon}\r\n      </div> \r\n      <p className={`${styles.name}`}>\r\n        {children}\r\n      </p>\r\n    </NavLink>\r\n  )\r\n}\r\n\r\nfunction AppHeader() {\r\n  return (\r\n    <header className={`${styles.navigationPanel} text text_type_main-default`}>\r\n      <div className={`${styles.content}`}>\r\n        <div className={`${styles.navigation}`}>\r\n          <div className={`${styles.navGroup}`}>\r\n            <NavItem \r\n              icon={<BurgerIcon type={'secondary'} />}\r\n              exact={true}\r\n              linkTo={'/'}\r\n            >\r\n              Конструктор\r\n            </NavItem>\r\n            <NavItem \r\n              icon={<ListIcon type={'secondary'} />}\r\n              exact={false}\r\n              linkTo={'/feed'}\r\n            >\r\n              Лента заказов\r\n            </NavItem>\r\n          </div>\r\n          <Link to={'/'} className={`${styles.logo}`}>\r\n            <Logo />\r\n          </Link>\r\n          <NavItem \r\n            icon={<ProfileIcon type={'secondary'} />} \r\n            linkTo={'/profile'}\r\n            exact={false}\r\n          >\r\n            Личный кабинет\r\n          </NavItem>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default AppHeader;","import { store } from \"../..\";\r\nimport { TypedUseSelectorHook, useSelector as selector, useDispatch as dispatch } from \"react-redux\";\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport { Action, ActionCreator } from 'redux';\r\nimport { TShopActions } from \"./shop\";\r\nimport { TUserActions } from \"./user\";\r\n\r\nexport type TAppActions = TShopActions & TUserActions;\r\n\r\nexport type TRootStore = ReturnType<typeof store.getState>;\r\nexport type AppDispatch = typeof store.dispatch;\r\nexport type AppThunk<ReturnType = void> = ActionCreator<\r\n  ThunkAction<ReturnType, Action, TRootStore, TAppActions>\r\n>;\r\nexport const useSelector: TypedUseSelectorHook<TRootStore> = selector;\r\nexport const useDispatch = () => dispatch<AppDispatch | AppThunk>();","import React, { FunctionComponent } from 'react';\r\nimport styles from './BurgerIngredients.module.css';\r\nimport { IIllustration } from '../../services/types/components';\r\n\r\nconst Illustration: FunctionComponent<IIllustration> = ({image, alt}) => {\r\n  return (\r\n    <div className={`${styles.illustration}`}>\r\n      <img src={image} alt={alt}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Illustration;","import React, {FunctionComponent} from 'react';\r\nimport styles from './BurgerIngredients.module.css';\r\nimport { IIngName } from '../../services/types/components';\r\n\r\nconst Name: FunctionComponent<IIngName> = ({ box, size, name }) => {\r\n  return (\r\n    <div className={`${styles.name} ${box || ''}`}>\r\n      <p className={`text text_type_main-${size || 'default'}`}>{name}</p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Name;\r\n","import React, { FunctionComponent } from 'react'; \r\nimport { useDrag } from \"react-dnd\";\r\nimport {CurrencyIcon} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './BurgerIngredients.module.css';\r\nimport Illustration from './Illustration';\r\nimport Name from './Name';\r\nimport { ICount, IIngredient, IPrice } from '../../services/types/components';\r\n\r\nconst Price: FunctionComponent<IPrice> = ({price}) => {\r\n  return (\r\n    <div className={`${styles.price}`}>\r\n      <p className=\"text text_type_digits-default mr-2\">{price}</p>\r\n      <CurrencyIcon type=\"primary\"/>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Counter: FunctionComponent<ICount> = ({count}) => {\r\n  return (\r\n    <div className={`${styles.counter}`} style={{visibility: `${count <= 0 ? 'hidden' : 'visible'}`}}>\r\n      <p className=\"text text_type_digits-default pt-1\">{count}</p>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Ingredient: FunctionComponent<IIngredient> = ({id, name, price, count, image}) => {\r\n  const [, dragRef] = useDrag({\r\n    type: \"ingredient\",\r\n    item: {id: id}\r\n  });\r\n\r\n  return (\r\n    <div ref={dragRef}>\r\n      <Illustration image={image} alt={name}/>\r\n      <Price price={price}/>\r\n      <Name name={name}/>\r\n      <Counter count={count} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Ingredient;","const BURGER_API_URL = 'https://norma.nomoreparties.space/api';\r\n\r\nconst checkReponse = (res: Response) => {\r\n  return res.ok ? res.json() : res.json().then((err) => Promise.reject(err));\r\n};\r\n\r\nexport async function getIngredients() {\r\n\r\n  return fetch(`${BURGER_API_URL}/ingredients`)\r\n    .then(res => checkReponse(res))\r\n    .then(data => data)\r\n\r\n}\r\n\r\nexport async function postOrder(ingredientsId: string[]) {\r\n\r\n  return fetch(`${BURGER_API_URL}/orders`, {\r\n      method: \"POST\", \r\n      headers: {\r\n        'Accept': 'application/json, text/plain, */*',\r\n        'Content-Type': 'application/json',\r\n        'Authorization': localStorage.accessToken\r\n      },\r\n      body: JSON.stringify({ingredients: ingredientsId})\r\n    })\r\n    .then(res => checkReponse(res))\r\n    .then(data => data)\r\n    .catch(e => console.log(e))\r\n\r\n}\r\n\r\nexport async function getOrders() {\r\n\r\n  return fetch(`${BURGER_API_URL}/orders/all`)\r\n    .then(res => checkReponse(res))\r\n    .then(data => data)\r\n\r\n}\r\n\r\nexport async function getUserOrders() {\r\n  // console.log(localStorage.accessToken, `${BURGER_API_URL}/orders?token=${localStorage.accessToken.split(' ')[1]}`);\r\n  return fetch(`${BURGER_API_URL}/orders?token=${localStorage.accessToken.split(' ')[1]}`, {\r\n    method: \"GET\", \r\n    headers: {\r\n      'Accept': 'application/json, text/plain, */*',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': localStorage.accessToken\r\n    }\r\n  })\r\n  .then(res => checkReponse(res))\r\n  .then(data => data)\r\n\r\n}\r\n\r\nexport async function getAccToken(token: string) {\r\n\r\n  return fetch(`${BURGER_API_URL}/auth/token`, {\r\n    method: \"POST\", \r\n    headers: {\r\n      'Accept': 'application/json, text/plain, */*',\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({token: token})\r\n  })\r\n  .then(res => checkReponse(res))\r\n  .then(data => data)\r\n\r\n}\r\n\r\nexport async function getUser() {\r\n\r\n  return fetch(`${BURGER_API_URL}/auth/user`, {\r\n    method: \"GET\", \r\n    headers: {\r\n      'Accept': 'application/json, text/plain, */*',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': localStorage.accessToken\r\n    }\r\n  })\r\n  .then(res => checkReponse(res))\r\n  .then(data => data)\r\n\r\n}\r\n\r\nexport async function updateUser(userData: {name: string, email: string, password: string}) {\r\n\r\n  return fetch(`${BURGER_API_URL}/auth/user`, {\r\n    method: \"PATCH\", \r\n    headers: {\r\n      'Accept': 'application/json, text/plain, */*',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': localStorage.accessToken\r\n    },\r\n    body: JSON.stringify({...userData})\r\n  })\r\n  .then(res => checkReponse(res))\r\n  .then(data => console.log(data))\r\n  \r\n}\r\n\r\nexport async function postAuth(email: string, pass: string) {\r\n\r\n  return fetch(`${BURGER_API_URL}/auth/login`, {\r\n    method: \"POST\", \r\n    headers: {\r\n      'Accept': 'application/json, text/plain, */*',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({email: email, password: pass})\r\n  })\r\n  .then(res => checkReponse(res))\r\n  .then(data => data)\r\n\r\n}\r\n\r\nexport async function postLogout(token: string) {\r\n\r\n  return fetch(`${BURGER_API_URL}/auth/logout`, {\r\n    method: \"POST\", \r\n    headers: {\r\n      'Accept': 'application/json, text/plain, */*',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({token: token})\r\n  })\r\n  .then(res => checkReponse(res))\r\n  .then(data => data)\r\n\r\n}\r\n\r\nexport async function postResetPassCode(email: string) {\r\n\r\n  return fetch(`${BURGER_API_URL}/password-reset`, {\r\n    method: \"POST\", \r\n    headers: {\r\n      'Accept': 'application/json, text/plain, */*',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({email: email})\r\n  })\r\n  .then(res => checkReponse(res))\r\n  .then(data => data)\r\n\r\n}\r\n\r\nexport async function postNewPass(pass: string, token: string) {\r\n\r\n  return fetch(`${BURGER_API_URL}/password-reset/reset`, {\r\n    method: \"POST\", \r\n    headers: {\r\n      'Accept': 'application/json, text/plain, */*',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify(\r\n      {\r\n        password: pass,\r\n        token: token\r\n      }\r\n    )\r\n  })\r\n  .then(res => checkReponse(res))\r\n  .then(data => data)\r\n\r\n}\r\n\r\nexport async function postNewUser(email: string, pass: string, name: string) {\r\n  return fetch(`${BURGER_API_URL}/auth/register`, {\r\n    method: \"POST\", \r\n    headers: {\r\n      'Accept': 'application/json, text/plain, */*',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify(\r\n      {\r\n        email: email,\r\n        password: pass,\r\n        name: name\r\n      }\r\n    )\r\n  })\r\n  .then(res => checkReponse(res))\r\n  .then(data => data)\r\n\r\n}","import { getIngredients, getOrders, getUserOrders, postOrder } from '../../utils/burger-api';\r\nimport { Dispatch } from 'redux';\r\nimport { TShopActions } from '../types/shop';\r\n\r\nexport const GET_INGREDIENTS_REQUEST: 'GET_INGREDIENTS_REQUEST' = 'GET_INGREDIENTS_REQUEST';\r\nexport const GET_INGREDIENTS_SUCCESS: 'GET_INGREDIENTS_SUCCESS' = 'GET_INGREDIENTS_SUCCESS';\r\nexport const GET_INGREDIENTS_FAILED: 'GET_INGREDIENTS_FAILED' = 'GET_INGREDIENTS_FAILED';\r\nexport const INCREASE_INGREDIENT_COUNT: 'INCREASE_INGREDIENT_COUNT' = 'INCREASE_INGREDIENT_COUNT';\r\nexport const DECREASE_INGREDIENT_COUNT: 'DECREASE_INGREDIENT_COUNT' = 'DECREASE_INGREDIENT_COUNT'; \r\nexport const SET_INGREDIENT_COUNT: 'SET_INGREDIENT_COUNT' = 'SET_INGREDIENT_COUNT';\r\n\r\nexport const CHANGE_SELECTED_BUN: 'CHANGE_SELECTED_BUN' = 'CHANGE_SELECTED_BUN';\r\nexport const ADD_SELECTED_INGREDIENT: 'ADD_SELECTED_INGREDIENT' = 'ADD_SELECTED_INGREDIENT';\r\nexport const DELETE_SELECTED_INGREDIENT: 'DELETE_SELECTED_INGREDIENT' = 'DELETE_SELECTED_INGREDIENT'; \r\nexport const SET_SELECTED_INGREDIENTS: 'SET_SELECTED_INGREDIENTS' = 'SET_SELECTED_INGREDIENTS';\r\n\r\nexport const SET_INGREDIENT_MODAL: 'SET_INGREDIENT_MODAL' = 'SET_INGREDIENT_MODAL';\r\nexport const DELETE_INGREDIENT_MODAL: 'DELETE_INGREDIENT_MODAL' = 'DELETE_INGREDIENT_MODAL';\r\n\r\nexport const GET_ORDER_REQUEST: 'GET_ORDER_REQUEST' = 'GET_ORDER_REQUEST';\r\nexport const GET_ORDER_SUCCESS: 'GET_ORDER_SUCCESS' = 'GET_ORDER_SUCCESS';\r\nexport const GET_ORDER_FAILED: 'GET_ORDER_FAILED' = 'GET_ORDER_FAILED';\r\n\r\nexport const GET_ORDERS_REQUEST: 'GET_ORDERS_REQUEST' = 'GET_ORDERS_REQUEST';\r\nexport const GET_ORDERS_SUCCESS: 'GET_ORDERS_SUCCESS' = 'GET_ORDERS_SUCCESS';\r\nexport const GET_ORDERS_FAILED: 'GET_ORDERS_FAILED' = 'GET_ORDERS_FAILED';\r\n\r\nexport const WS_CONNECTION_START: 'WS_CONNECTION_START' = 'WS_CONNECTION_START';\r\nexport const WS_CONNECTION_SUCCESS: 'WS_CONNECTION_SUCCESS' = 'WS_CONNECTION_SUCCESS'; \r\nexport const WS_CONNECTION_ERROR: 'WS_CONNECTION_ERROR' = 'WS_CONNECTION_ERROR';\r\nexport const WS_CONNECTION_CLOSE: 'WS_CONNECTION_CLOSE' = 'WS_CONNECTION_CLOSE';\r\nexport const WS_CONNECTION_CLOSED: 'WS_CONNECTION_CLOSED' = 'WS_CONNECTION_CLOSED';\r\nexport const WS_GET_MESSAGE: 'WS_GET_MESSAGE' = 'WS_GET_MESSAGE';\r\nexport const WS_SEND_MESSAGE: 'WS_SEND_MESSAGE' = 'WS_SEND_MESSAGE';\r\n\r\nexport function getItems() {\r\n  return function(dispatch: Dispatch<TShopActions>) {\r\n    dispatch({\r\n      type: GET_INGREDIENTS_REQUEST,\r\n    })\r\n    getIngredients()\r\n      .then(res => {\r\n        if (res && res.success) {\r\n          dispatch({\r\n            type: GET_INGREDIENTS_SUCCESS,\r\n            ingredients: res.data\r\n          })\r\n        } else {\r\n          dispatch({\r\n            type: GET_INGREDIENTS_FAILED,\r\n            error: {message: 'something went wrong...'}\r\n          })\r\n        }\r\n      })\r\n      .catch(e => console.log(e));\r\n  }\r\n}\r\n\r\nexport function getOrder(ingredientsId: string[]) {\r\n  return function(dispatch: Dispatch<TShopActions>) {\r\n    dispatch({\r\n      type: GET_ORDER_REQUEST,\r\n    })\r\n    postOrder(ingredientsId)\r\n      .then(res => {\r\n        if (res && res.success) {\r\n          dispatch({\r\n            type: GET_ORDER_SUCCESS,\r\n            order: res\r\n          })\r\n          dispatch({\r\n            type: SET_SELECTED_INGREDIENTS,\r\n            ingredients: []\r\n          })\r\n          dispatch({\r\n            type: CHANGE_SELECTED_BUN,\r\n            bunId: null\r\n          })\r\n          // @ts-ignore\r\n          dispatch(getItems())\r\n        } else {\r\n          dispatch({\r\n            type: GET_ORDER_FAILED,\r\n            error: {message: 'something went wrong...'}\r\n          })\r\n        }\r\n      })\r\n      .catch(e => console.log(e));\r\n  }\r\n}\r\n\r\nexport function getOrdersFeed() {\r\n  return function(dispatch: Dispatch<TShopActions>) {\r\n    dispatch({\r\n      type: GET_ORDERS_REQUEST,\r\n    })\r\n    getOrders()\r\n      .then(res => {\r\n        if (res && res.success) {\r\n          dispatch({\r\n            type: GET_ORDERS_SUCCESS,\r\n            orders: res.orders,\r\n            total: res.total,\r\n            today: res.totalToday\r\n          })\r\n        } else {\r\n          dispatch({\r\n            type: GET_ORDERS_FAILED,\r\n            error: {message: 'something went wrong...'}\r\n          })\r\n        }\r\n      })\r\n      .catch(e => console.log(e))\r\n  }\r\n}\r\n\r\nexport function getOrdersFeedUser() {\r\n  return function(dispatch: Dispatch<TShopActions>) {\r\n    dispatch({\r\n      type: GET_ORDERS_REQUEST,\r\n    })\r\n    getUserOrders()\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res && res.success) {\r\n          dispatch({\r\n            type: GET_ORDERS_SUCCESS,\r\n            orders: res.orders,\r\n            total: res.total,\r\n            today: res.totalToday\r\n          })\r\n        } else {\r\n          dispatch({\r\n            type: GET_ORDERS_FAILED,\r\n            error: {message: 'something went wrong...'}\r\n          })\r\n        }\r\n      })\r\n      .catch(e => console.log(e))\r\n  }\r\n}","import React, { useMemo, useState, useEffect, FunctionComponent } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport { useSelector, useDispatch } from '../../services/types/hooks';\r\nimport {Tab} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './BurgerIngredients.module.css';\r\nimport Ingredient from './Ingredient';\r\nimport { getItems, SET_INGREDIENT_MODAL} from '../../services/actions/shop';\r\nimport { ICol, IHeadline } from '../../services/types/components';\r\n \r\nconst Headline: FunctionComponent<IHeadline> = ({id, children}) => {\r\n  return (\r\n    <p className={'text text_type_main-medium pt-10 pb-6'} style={{width: '100%'}} id={id}>{children}</p>\r\n  )\r\n}\r\n\r\nconst Row: FunctionComponent = ({children}) => {\r\n  return (\r\n    <div className={`${styles.columnsPuns}`} style={{textAlign: 'center'}}>\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Col: FunctionComponent<ICol> = ({onClick, children}) => {\r\n  return (\r\n    <div className={`${styles.col}`} onClick={onClick}>\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst BurgerIngredients = () => {\r\n\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n\r\n  // Ingredients \r\n  \r\n  const ingredients = useSelector(state => state.shop.ingredients);\r\n\r\n  useEffect(() => {\r\n    if (!ingredients.length) dispatch(getItems());\r\n    },\r\n    [dispatch, ingredients]\r\n  );  \r\n\r\n  const buns = useMemo(() => ingredients.filter((item: { type: string; }) => item.type === 'bun'), [ingredients]);\r\n  const mains = useMemo(() => ingredients.filter((item: { type: string; }) => item.type === 'main'), [ingredients]);\r\n  const sauces = useMemo(() => ingredients.filter((item: { type: string; }) => item.type === 'sauce'), [ingredients]);\r\n\r\n  const dataToIngredient = (ingredients: { _id: string; name: string; price: string | number; image: string; __v: number; }) => {\r\n    return (\r\n      <Col key={ingredients._id} onClick={() => {handleOpenModal(ingredients)}}>\r\n        <Link to={{\r\n          pathname: `/ingredients/${ingredients._id}`,\r\n          state: {modal: true, background: location}\r\n        }}>\r\n          <Ingredient \r\n            name={ingredients.name} \r\n            price={ingredients.price}\r\n            image={ingredients.image}\r\n            id={ingredients._id}\r\n            count={ingredients.__v}\r\n          />\r\n        </Link>\r\n      </Col>\r\n    )\r\n  }\r\n\r\n  // Modal \r\n\r\n  const handleOpenModal = (data: { _id: string; name: string; price: string | number; image: string; __v: number; }) => {\r\n    dispatch({\r\n      type: SET_INGREDIENT_MODAL,\r\n      ingredient: data\r\n    })\r\n  }\r\n\r\n  // Tabs\r\n\r\n  const [current, setCurrent] = useState('buns');\r\n\r\n  const setTab = (tab: string) => {\r\n    setCurrent(tab);\r\n    const element = document.getElementById(tab);\r\n    if (element) element.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  const activateTab = () => {\r\n    const tabs = ['buns', 'sauces', 'mains'];\r\n    const headings = tabs.map((id) => document.getElementById(id))\r\n    const scrollPosition = document.getElementById('ingredients')!.scrollTop;\r\n    headings.forEach((heading, iter) => {\r\n      const headingPosition = heading!.offsetTop;\r\n      if (headingPosition <= scrollPosition + 200 && headingPosition >= scrollPosition - 200) {\r\n        setCurrent(tabs[iter]);\r\n      }\r\n    })\r\n  }\r\n\r\n  if (!ingredients.length) return null;\r\n\r\n  return (\r\n    <>\r\n      <div className={`${styles.containerMain}`} style={{ textAlign: 'left'}} >\r\n        <p className={'text text_type_main-large pt-10 pb-5'}>Соберите бургер</p>\r\n        <div style={{ display: 'flex', width: '100%' }}>\r\n          <Tab value=\"buns\" active={current === 'buns'} onClick={setTab}>\r\n            Булки\r\n          </Tab>\r\n          <Tab value=\"sauces\" active={current === 'sauces'} onClick={setTab}>\r\n            Соусы\r\n          </Tab>\r\n          <Tab value=\"mains\" active={current === 'mains'} onClick={setTab}>\r\n            Начинки\r\n          </Tab>\r\n        </div>\r\n        <div className={`${styles.ingredients}`} id='ingredients' onScroll={activateTab}>\r\n          <Headline id='buns'>Булки</Headline>\r\n          <Row>{buns.map(dataToIngredient)}</Row>\r\n          <Headline id='sauces'>Соусы</Headline>\r\n          <Row>{sauces.map(dataToIngredient)}</Row>\r\n          <Headline id='mains'>Начинки</Headline>\r\n          <Row>{mains.map(dataToIngredient)}</Row>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default BurgerIngredients;","import React, { FunctionComponent } from 'react';\r\nimport styles from './Modal.module.css';\r\nimport { IModalOverlay } from '../../services/types/components';\r\n\r\nconst ModalOverlay: FunctionComponent<IModalOverlay> = ({onClick}) => {\r\n  return (\r\n    <div className={`${styles.modalOverlay}`} onClick={onClick}></div>\r\n  )\r\n}\r\n\r\nexport default ModalOverlay;","import React, { FunctionComponent, useEffect } from 'react';\r\nimport {CloseIcon} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './Modal.module.css';\r\nimport { createPortal } from 'react-dom';\r\nimport ModalOverlay from './ModalOverlay';\r\nimport { IModal, IModalHeader } from '../../services/types/components';\r\n\r\nconst ModalHeader: FunctionComponent<IModalHeader> = ({headerClass, onClick, children}) => {\r\n  return (\r\n    <div className={`${styles.modalHeader}`}>\r\n      <p className={headerClass ? headerClass : 'text text_type_main-large'} >{children}</p>\r\n      <CloseIcon onClick={onClick} type={'primary'} />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst ModalBody: FunctionComponent = ({children}) => {\r\n  return (\r\n    <div className={`${styles.modalBody}`}>\r\n      {children}\r\n    </div>\r\n  )\r\n}\r\n \r\nconst Modal: FunctionComponent<IModal> = ({onClose, isVisible, box, header, headerClass, children}) => {\r\n\r\n  useEffect(() => {\r\n    if (isVisible) document.getElementById('modal-container')?.focus();\r\n  }, [isVisible])\r\n\r\n  useEffect(() => {\r\n    const closeByEscape = (e: { key: string; }) => {\r\n      if (e.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    }\r\n\r\n    document.addEventListener('keydown', closeByEscape)\r\n    \r\n    return () => document.removeEventListener('keydown', closeByEscape)\r\n}, [onClose])\r\n\r\n  return createPortal(\r\n    ( \r\n      <> \r\n        {\r\n          isVisible && \r\n          <div id='modal-container'> \r\n            <ModalOverlay onClick={onClose} />\r\n            <div \r\n              className={`${styles.modal}`}\r\n              style={\r\n                {\r\n                  width: box.w, \r\n                  height: box.h,\r\n                  left: `calc(50% - ${box.w} / 2)`,\r\n                  top: `calc(50% - ${box.h} / 2)`\r\n                }\r\n              }\r\n            >\r\n              <ModalHeader onClick={onClose} headerClass={headerClass}>{header}</ModalHeader>\r\n              <ModalBody>{children}</ModalBody>\r\n            </div>\r\n          </div>\r\n        }\r\n      </>\r\n    ), \r\n    document.getElementById(\"modal-root\")!\r\n  );\r\n}\r\n\r\nexport default Modal;","import React from 'react';\r\nimport { useSelector } from '../../services/types/hooks';\r\nimport { CheckMarkIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './BurgerConstructor.module.css';\r\n\r\nexport default function OrderDetails() {\r\n  \r\n  const orderData = useSelector(state => state.shop.order);\r\n\r\n  if (!orderData) return (\r\n    <>\r\n      <p className={`text text_type_main-medium`}>Заказ оформляется...</p>\r\n      <div className={`${styles.doneImage}`}></div>\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <div className={`${styles.oderDetail}`}>\r\n      <p className={`${styles.orderId} text text_type_digits-large pb-8 pt-4`}>{orderData.order.number}</p>\r\n      <p className={`text text_type_main-medium`}>идентификатор заказа</p>\r\n      <div className={`${styles.doneImage}`}></div>\r\n      <div className={`${styles.orderDone}`}>\r\n        <div className={`${styles.large} pt`}>\r\n          <CheckMarkIcon type=\"primary\" />\r\n        </div>\r\n      </div>\r\n      <p className={`text text_type_main-default pb-2`}>Ваш заказ начали готовить</p>\r\n      <p className={`text text_type_main-default text_color_inactive`}>Дождитесь готовности на орбитальной станции</p>\r\n    </div>\r\n  )\r\n}","import { getAccToken, getUser, postAuth, postLogout, postNewPass, postNewUser, postResetPassCode } from \"../../utils/burger-api\";\r\nimport { Dispatch } from \"redux\";\r\nimport { TUserActions } from \"../types/user\";\r\n\r\nexport const ADD_NEW_USER = 'ADD_NEW_USER';\r\nexport const ADD_TOKENS = 'ADD_TOKENS'; \r\nexport const UPDATE_ACC_TOKEN = 'UPDATE_ACC_TOKEN';\r\nexport const SET_USER_DATA = 'SET_USER_DATA';\r\nexport const RESET_PASS_CODE_SENDED = 'SET_EMAIL_FOR_RESET_PASS';\r\nexport const PASS_RESET_SUCCESS = 'PASS_RESET_SUCCESS';\r\nexport const DELETE_USER_DATA = 'DELETE_USER_DATA';\r\nexport const CHANGE_USER_NAME = 'CHANGE_USER_NAME';\r\nexport const CHANGE_USER_EMAIL = 'CHANGE_USER_EMAIL';\r\nexport const CHANGE_USER_PASS = 'CHANGE_USER_PASS';\r\n\r\nexport function addTokens(email: string, pass: string) {\r\n  return function(disptach: Dispatch<TUserActions>) {\r\n    postAuth(email, pass)\r\n      .then(res => {\r\n        if (res && res.success) {\r\n          localStorage.setItem('refreshToken', res.refreshToken);\r\n          localStorage.setItem('accessToken', res.accessToken);\r\n          localStorage.setItem('initTime', String(Date.now() / 1000))\r\n          console.log(localStorage)\r\n          disptach({type: ADD_TOKENS});\r\n        }\r\n      })\r\n      .catch(e => console.log(e));\r\n  }\r\n}\r\n\r\nexport function updateAccToken() {\r\n  return function(dispatch: Dispatch<TUserActions>) {\r\n    console.log(localStorage)\r\n    getAccToken(localStorage.refreshToken)\r\n      .then(res => {\r\n        console.log('hey')\r\n        if (res && res.success) {\r\n          localStorage.setItem('accessToken', res.accessToken);\r\n          localStorage.setItem('initTime', String(Date.now() / 1000))\r\n          dispatch({type: UPDATE_ACC_TOKEN, accessToken: res.accessToken})\r\n        }\r\n      })\r\n      .catch(e => console.log(e));\r\n  }\r\n}\r\n\r\nexport function getUserData() {\r\n  return function(dispatch: Dispatch<TUserActions>) {\r\n    getUser()\r\n      .then(res => {\r\n        if (res && res.success) {\r\n          dispatch({\r\n            type: SET_USER_DATA,\r\n            user: res.user\r\n          })\r\n        }\r\n      })\r\n      .catch(e => console.log(e));\r\n  }\r\n}\r\n\r\nexport function deleteUserData(token: string) {\r\n  return function(dispatch: Dispatch<TUserActions>) {\r\n    postLogout(token)\r\n      .then(res => {\r\n        if (res && res.success) {\r\n          dispatch({type: DELETE_USER_DATA});\r\n        } \r\n      })\r\n      .catch(e => console.log(e));\r\n  }\r\n}\r\n\r\nexport function sendResetPassCode(email: string) {\r\n  return function(dispatch: Dispatch<TUserActions>) {\r\n    postResetPassCode(email)\r\n      .then(res => {\r\n        if (res && res.success) {\r\n          dispatch({type: RESET_PASS_CODE_SENDED})\r\n        }\r\n      })\r\n      .catch(e => console.log(e));\r\n  }\r\n}\r\n\r\nexport function setNewPass(pass: string, code: string) {\r\n  return function(dispatch: Dispatch<TUserActions>) {\r\n    postNewPass(pass, code)\r\n      .then(res => {\r\n        if (res && res.success) {\r\n          dispatch({type: PASS_RESET_SUCCESS})\r\n        }\r\n      })\r\n      .catch(e => console.log(e));\r\n  }\r\n}\r\n\r\nexport function addNewUser(email: string, pass: string, name: string) {\r\n  return function(dispatch: Dispatch<TUserActions>) {\r\n    postNewUser(email, pass, name)\r\n      .then(res => {\r\n        if (res && res.success) {\r\n          dispatch({\r\n            type: ADD_NEW_USER,\r\n            user: res.user,\r\n            accessToken: res.accessToken,\r\n            refreshToken: res.refreshToken\r\n          })\r\n        } \r\n      })\r\n      .catch(e => console.log(e));\r\n  }\r\n}\r\n","import React, { FunctionComponent, useCallback, useEffect, useRef, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport update from 'immutability-helper';\r\nimport { useSelector, useDispatch } from '../../services/types/hooks';\r\nimport { useDrag, useDrop } from \"react-dnd\";\r\nimport {ConstructorElement, CurrencyIcon, DragIcon, Button} from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './BurgerConstructor.module.css';\r\nimport Modal from '../Modal/Modal';\r\nimport OrderDetails from './OrderDetails';\r\nimport { \r\n  getItems, \r\n  getOrder,\r\n  ADD_SELECTED_INGREDIENT, \r\n  DELETE_SELECTED_INGREDIENT, \r\n  INCREASE_INGREDIENT_COUNT, \r\n  DECREASE_INGREDIENT_COUNT,\r\n  SET_INGREDIENT_COUNT,\r\n  CHANGE_SELECTED_BUN,\r\n  SET_SELECTED_INGREDIENTS,\r\n} from '../../services/actions/shop';\r\nimport { updateAccToken } from '../../services/actions/user';\r\nimport { IConstructorList, IIngredient, IPrice } from '../../services/types/components';\r\n\r\nconst Price: FunctionComponent<IPrice> = ({size, price}) => {\r\n  if (!size) size = 'default';\r\n\r\n  let iconSize = styles.default;\r\n  if (size === 'medium') iconSize = styles.medium; \r\n\r\n  return (\r\n    <div className={`${styles.price} ${iconSize}`}>\r\n      <p className={`text text_type_digits-${size} mr-2`}>{price}</p>\r\n      <CurrencyIcon type=\"primary\"/>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst ListElement: FunctionComponent<IConstructorList> = ({index, moveIngredientHandler, type, name, price, image, uid, id}) => {\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const ref = useRef<HTMLInputElement>(null);\r\n\r\n  const [, drop] = useDrop({\r\n    accept: 'selectedIngredient',\r\n    hover(item: {index: string | number}, monitor) {\r\n      if (!ref.current) {\r\n        return;\r\n      }\r\n      const dragIndex = item.index;\r\n      const hoverIndex = index;\r\n\r\n      if (dragIndex === hoverIndex) {\r\n        return;\r\n      }\r\n\r\n      const hoverBoundingRect = ref.current?.getBoundingClientRect();\r\n      const hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\r\n      const clientOffset = monitor.getClientOffset();\r\n      const hoverClientY = clientOffset!.y - hoverBoundingRect.top;\r\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\r\n        return;\r\n      }\r\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\r\n        return;\r\n      }\r\n      moveIngredientHandler(dragIndex, hoverIndex);\r\n      item.index = hoverIndex;\r\n    },\r\n  })\r\n\r\n  const [{handlerId, isDragging}, drag] = useDrag({\r\n    type: 'selectedIngredient',\r\n    item: () => {\r\n      return { id: uid, index: index };\r\n    },\r\n    collect: (monitor) => ({\r\n      handlerId: monitor.getHandlerId(),\r\n      isDragging: monitor.isDragging(),\r\n    })\r\n  })\r\n\r\n  const opacity = isDragging ? 0 : 1;\r\n\r\n  let isLocked = false;\r\n  \r\n  if (type === 'top' || type === 'bottom') isLocked = true;\r\n  else drop(ref); drag(ref); \r\n\r\n  return (\r\n    <div className={`${styles.element}`} style={{ opacity }} ref={ref} data-handler-id={handlerId}>\r\n      <div className='' style={{visibility: `${isLocked ? 'hidden' : 'visible'}`}}>\r\n       <DragIcon type='primary'/>\r\n      </div>\r\n      <ConstructorElement\r\n        text={name + (type === 'top' ? ' (верх)' : '') + (type === 'bottom' ? ' (низ)' : '')}\r\n        price={price}\r\n        thumbnail={image}\r\n        type={type}\r\n        isLocked={isLocked}\r\n        handleClose={() => {\r\n          dispatch({\r\n            type: DECREASE_INGREDIENT_COUNT,\r\n            id: id\r\n          })\r\n          dispatch({\r\n            type: DELETE_SELECTED_INGREDIENT,\r\n            uid: uid\r\n          })\r\n        }}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst BurgerConstructor = () => {\r\n\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  // Order details (Modal)\r\n  \r\n  const [modalVisible, setVisibility] = useState(false);\r\n\r\n  const getIngredientsId = (ingredient: { id: string; }) => {\r\n    return ingredient.id;\r\n  }\r\n\r\n  const handleCloseModal = () => {\r\n    setVisibility(false);\r\n  }\r\n\r\n  const handleOpenModal = () => {\r\n    if (!localStorage.refreshToken) return history.push('/login');\r\n    dispatch(getOrder([...selectedIngredients, selectedBun, selectedBun].map(getIngredientsId)));\r\n    setVisibility(true);\r\n  }\r\n\r\n  // Ingredients \r\n  \r\n  const ingredients = useSelector(state => state.shop.ingredients);\r\n  const selectedBun = useSelector(state => state.shop.selectedBun);\r\n  const selectedIngredients = useSelector(state => state.shop.selectedIngredients);\r\n\r\n  useEffect(() => {\r\n      if (!ingredients.length) dispatch(getItems());\r\n    },\r\n    [dispatch, ingredients]\r\n  ); \r\n\r\n  useEffect(() => {\r\n    dispatch(updateAccToken());\r\n  }, [dispatch])\r\n\r\n  const dataToIngredient = (ingredientId: { id: string; uid: string; }, index: number, position: string | undefined) => {\r\n    const ingredient = ingredients.filter((ingr: { _id: string; }) => ingr._id === ingredientId.id)[0];\r\n\r\n    return (\r\n      <ListElement \r\n        name={ingredient.name}\r\n        price={ingredient.price}\r\n        image={ingredient.image}\r\n        id={ingredient._id}\r\n        uid={ingredientId.uid}\r\n        key={ingredientId.uid}\r\n        type={position}\r\n        index={index}\r\n        moveIngredientHandler={moveIngredientHandler}\r\n      />\r\n    )\r\n  }\r\n\r\n  // Total price\r\n\r\n  const getPrices = (ingredientId: { id: string; }) => {\r\n    if (!ingredientId.id) return 0;\r\n    const ingredient = ingredients.filter((ingr: { _id: string; }) => ingr._id === ingredientId.id)[0];\r\n\r\n    return ingredient.price;\r\n  }\r\n\r\n  const getTotalPrice = (acc: number, val: number) => acc + val;\r\n\r\n  // onDrop (get ingredients from BurgerIngredients)\r\n\r\n  const [{isHover}, dropTarget] = useDrop({\r\n    accept: \"ingredient\",\r\n    drop(ingredient: IIngredient) {\r\n      const ingredientFull = ingredients.filter((ingr: { _id: string; }) => ingr._id === ingredient.id)[0];\r\n      if (ingredientFull.type === 'bun') {\r\n        dispatch({\r\n          type: SET_INGREDIENT_COUNT,\r\n          id: selectedBun.id,\r\n          count: 0,\r\n        })\r\n        dispatch({\r\n          type: CHANGE_SELECTED_BUN,\r\n          bunId: ingredient.id\r\n        })\r\n        dispatch({\r\n          type: SET_INGREDIENT_COUNT,\r\n          id: ingredient.id,\r\n          count: 2,\r\n        })\r\n      } else {\r\n        dispatch({\r\n          type: ADD_SELECTED_INGREDIENT,\r\n          ingredient: {...ingredient, uid: Number(new Date())}\r\n        });\r\n        dispatch({\r\n          type: INCREASE_INGREDIENT_COUNT,\r\n          id: ingredient.id\r\n        })\r\n      }\r\n    },\r\n    collect: monitor => ({\r\n      isHover: monitor.isOver(),\r\n    })\r\n  });\r\n\r\n  const borderColor = isHover ? '4px double lightgreen' : '2px double transparent';\r\n\r\n  // onDrag (sortable within itself)\r\n\r\n  const moveIngredientHandler = useCallback((dragIndex, hoverIndex) => {\r\n    const draggableItem = selectedIngredients[dragIndex];\r\n    const newSelectedIngredients = update(selectedIngredients, {\r\n      $splice: [\r\n        [dragIndex, 1],\r\n        [hoverIndex, 0, draggableItem],\r\n      ],\r\n    })\r\n\r\n    dispatch({\r\n      type: SET_SELECTED_INGREDIENTS,\r\n      ingredients: newSelectedIngredients\r\n    })\r\n  }, [selectedIngredients, dispatch]);\r\n\r\n  if (!ingredients.length || ingredients.length === 0) return null;\r\n\r\n  return (\r\n    <div className={`${styles.containerMain}`}>\r\n      {\r\n        (selectedIngredients.length || selectedBun.id) \r\n        ?\r\n        <>\r\n          <div className={'pt-25 pb-10'} style={{ display: 'flex', flexDirection: 'column', gap: '10px', border: borderColor}} ref={dropTarget}>\r\n            {selectedBun.id && [selectedBun].map((bun) => dataToIngredient(bun, -1, 'top'))}\r\n            <div className={`${styles.optionalIngredients}`} style={{display: 'flex', flexDirection: 'column', gap: '10px'}}>\r\n              {selectedIngredients.map((ingredient: { id: string; uid: string; }, index: number) => dataToIngredient(ingredient, index, undefined))}\r\n            </div>\r\n            {selectedBun.id && [selectedBun].map((bun) => dataToIngredient(bun, -1, 'bottom'))}\r\n          </div>\r\n          <div className={`${styles.totalInfo}`}>\r\n            <Price price={[...selectedIngredients, selectedBun, selectedBun].map(getPrices).reduce(getTotalPrice)} size='medium'/>\r\n            <div className=\"pl-10\">\r\n              <Button type=\"primary\" size=\"large\" onClick={() => !!selectedBun.id ? handleOpenModal() : null}>\r\n                Оформить заказ\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </>\r\n        :\r\n        <>\r\n          <div className={'mt-25 pt-30 pb-30'} style={{ display: 'flex', flexDirection: 'column', gap: '10px', border: borderColor}} ref={dropTarget} id='drop-target'>\r\n            <p className={`text text_type_main-medium pb-2 pl-10 pr-10 pt-2`} style={{textAlign: 'center'}}>\r\n              Перенесите в эту область булку и другие ингредиенты для бургера \r\n            </p>\r\n          </div>\r\n        </>\r\n      }\r\n      {\r\n        modalVisible &&\r\n        <Modal header={''} isVisible={modalVisible} onClose={handleCloseModal} box={{w: '720px', h: '720px'}}>\r\n          <OrderDetails />\r\n        </Modal>\r\n      }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default BurgerConstructor;","import React from \"react\";\r\nimport { Route, Switch, useRouteMatch } from 'react-router-dom';\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\n\r\nimport BurgerIngredients from '../components/BurgerIngredients/BurgerIngredients';\r\nimport BurgerConstructor from '../components/BurgerConstructor/BurgerConstructor';\r\n\r\nimport styles from './Constructor.module.css';\r\n\r\n// interface ILocation extends ILocationState, Location {};\r\n\r\nexport const ConstructorPage = () => {\r\n  const { path } = useRouteMatch();\r\n\r\n  return (\r\n    <>\r\n      <Switch>\r\n        <Route path={`${path}`} exact>\r\n          <DndProvider backend={HTML5Backend}>\r\n            <div className={`${styles.containerMain}`}>\r\n              <BurgerIngredients />\r\n              <BurgerConstructor/>\r\n            </div>\r\n          </DndProvider>\r\n        </Route>\r\n      </Switch>\r\n    </>\r\n  )\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { Link, Redirect, useLocation } from 'react-router-dom';\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './Auth.module.css';\r\nimport { addTokens, getUserData, updateAccToken } from '../../services/actions/user';\r\nimport { useSelector, useDispatch } from '../../services/types/hooks';\r\n\r\nfunction Auth() {\r\n\r\n  const dispatch = useDispatch();\r\n  const redirectState = useLocation<{from: string}>().state;\r\n  const userData = useSelector(state => state.user);\r\n\r\n  const isTokenExpired = () => {\r\n    if (!localStorage.initTime) return true; // there is no token at all...\r\n    return (Date.now() / 1000) > (Number(localStorage.initTime) + 1200);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!userData.user.name && localStorage.length !== 0) {\r\n      if (isTokenExpired()) dispatch(updateAccToken());\r\n      dispatch(getUserData());\r\n    }\r\n  }, [dispatch, userData])\r\n\r\n  const [passParams, setPassParams] = useState<{type: 'text' | 'password', icon: 'ShowIcon' | 'HideIcon'}>({type: 'password', icon: 'ShowIcon'})\r\n\r\n  const [valueEmail, setValueEmail] = useState('');\r\n  const [valuePass, setValuePass] = useState('');\r\n\r\n  const handleIconClick = () => {\r\n    setPassParams({\r\n      type: passParams.type === 'password' ? 'text' : 'password',\r\n      icon: passParams.icon === 'ShowIcon' ? 'HideIcon' : 'ShowIcon'\r\n    })\r\n  }\r\n\r\n  function handleSubmit(event: { preventDefault: () => void; }) {\r\n    event.preventDefault();\r\n    dispatch(addTokens(valueEmail, valuePass));\r\n  }\r\n  \r\n  if (userData.refreshToken || localStorage.refreshToken) return (<Redirect to={ redirectState ? redirectState.from : '/' } />)\r\n  \r\n  return (\r\n    <div className={`${styles.content}`}>\r\n      <p className=\"text text_type_main-medium\">\r\n        Вход\r\n      </p>\r\n      <form action='' onSubmit={handleSubmit}>\r\n        <div className='pb-6 pt-6'>\r\n          <Input\r\n            type={'email'}\r\n            placeholder={'E-mail'}\r\n            value={valueEmail}\r\n            onChange={e => setValueEmail(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className='pb-6'>\r\n          <Input\r\n            type={passParams.type}\r\n            placeholder={'Пароль'}\r\n            icon={passParams.icon}\r\n            onIconClick={handleIconClick}\r\n            value={valuePass}\r\n            onChange={e => setValuePass(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className={styles.innerContent}>\r\n          <Button type=\"primary\" size=\"medium\"> \r\n            Войти\r\n          </Button>\r\n        </div>\r\n      </form>\r\n      <p className=\"text text_type_main-small text_color_inactive pt-20\">\r\n        Вы - новый пользователь? <Link to=\"./register\">Зарегистрироваться</Link>\r\n      </p>\r\n      <p className=\"text text_type_main-small text_color_inactive pt-4\">\r\n        Забыли пароль? <Link to=\"./forgot-password\">Восстановить пароль</Link>\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Auth;","import Auth from '../components/Auth/Auth';\r\n\r\nexport const LoginPage = () => {\r\n  return <Auth />;\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './Register.module.css';\r\nimport { addNewUser, getUserData, updateAccToken } from '../../services/actions/user';\r\nimport { useSelector, useDispatch } from '../../services/types/hooks';\r\n\r\nfunction Register() {\r\n  const dispatch = useDispatch();\r\n  \r\n  const userData = useSelector(state => state.user);\r\n\r\n  const isTokenExpired = () => {\r\n    if (!localStorage.initTime) return true; // there is no token at all...\r\n    return (Date.now() / 1000) > (Number(localStorage.initTime) + 1200);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!userData.user.name && localStorage.length !== 0) {\r\n      if (isTokenExpired()) dispatch(updateAccToken());\r\n      dispatch(getUserData());\r\n    }\r\n  }, [dispatch, userData])\r\n\r\n  const [passParams, setPassParams] = useState<{type: 'text' | 'password', icon: 'ShowIcon' | 'HideIcon'}>({type: 'password', icon: 'ShowIcon'})\r\n\r\n  const [valueName, setValueName] = useState('');\r\n  const [valueEmail, setValueEmail] = useState('');\r\n  const [valuePass, setValuePass] = useState('');\r\n\r\n  const handleIconClick = () => {\r\n    setPassParams({\r\n      type: passParams.type === 'password' ? 'text' : 'password',\r\n      icon: passParams.icon === 'ShowIcon' ? 'HideIcon' : 'ShowIcon'\r\n    })\r\n  }\r\n\r\n  function handleSubmit(event: { preventDefault: () => void; }) {\r\n    event.preventDefault();\r\n    dispatch(addNewUser(valueEmail, valuePass, valueName));\r\n  }\r\n  \r\n  if (userData.refreshToken || localStorage.refreshToken) return (<Redirect to=\"/\" />)\r\n\r\n  return (\r\n    <div className={`${styles.content}`}>\r\n      <p className=\"text text_type_main-medium\">\r\n        Регистрация\r\n      </p>\r\n      <form action='' onSubmit={handleSubmit} id='form'>\r\n        <div className='pt-6'>\r\n          <Input \r\n            type={'text'} \r\n            placeholder={'Имя'}\r\n            value={valueName}\r\n            onChange={e => setValueName(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className='pb-6 pt-6'>\r\n          <Input\r\n            type={'email'}\r\n            placeholder={'E-mail'}\r\n            value={valueEmail}\r\n            onChange={e => setValueEmail(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className='pb-6'>\r\n          <Input\r\n            type={passParams.type}\r\n            placeholder={'Пароль'}\r\n            icon={passParams.icon}\r\n            onIconClick={handleIconClick}\r\n            value={valuePass}\r\n            onChange={e => setValuePass(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className={styles.innerContent}>\r\n          <Button type=\"primary\" size=\"medium\"> \r\n            Войти\r\n          </Button>\r\n        </div>\r\n      </form>\r\n      <p className=\"text text_type_main-small text_color_inactive pt-20\">\r\n        Уже зарегистрированы? <Link to=\"./login\">Войти</Link>\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Register;","import Register from '../components/Register/Register';\r\n\r\nexport const RegisterPage = () => {\r\n  return <Register />;\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './ForgotPass.module.css';\r\nimport { useSelector, useDispatch } from '../../services/types/hooks';\r\nimport { getUserData, sendResetPassCode, updateAccToken } from '../../services/actions/user';\r\n\r\n\r\nconst ForgotPass = () => {\r\n\r\n  const dispatch = useDispatch();\r\n  \r\n  const userData = useSelector(state => state.user);\r\n  const [valueEmail, setValueEmail] = useState('');\r\n\r\n  const isTokenExpired = () => {\r\n    if (!localStorage.initTime) return true; // there is no token at all...\r\n    return (Date.now() / 1000) > (Number(localStorage.initTime) + 1200);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!userData.user.name && localStorage.length !== 0) {\r\n      if (isTokenExpired()) dispatch(updateAccToken());\r\n      dispatch(getUserData());\r\n    }\r\n  }, [dispatch, userData])\r\n\r\n  function handleSubmit(event: { preventDefault: () => void; }) {\r\n    event.preventDefault();\r\n    dispatch(sendResetPassCode(valueEmail));\r\n  }\r\n\r\n  if (userData.refreshToken || localStorage.refreshToken) return (<Redirect to=\"/\" />)\r\n\r\n  if (userData.resetPass) return (<Redirect to=\"/reset-password\" />)\r\n\r\n  return (\r\n    <div className={`${styles.content}`}>\r\n      <p className=\"text text_type_main-medium\">\r\n        Восстановление пароля\r\n      </p>\r\n      <form action='' onSubmit={handleSubmit} id='form'>\r\n        <div className='pt-6 pb-6'>\r\n          <Input \r\n            type={'email'}\r\n            placeholder={'Укажите e-mail'}\r\n            value={valueEmail}\r\n            onChange={e => setValueEmail(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className={styles.innerContent}>\r\n          <Button type=\"primary\" size=\"medium\"> \r\n            Войти\r\n          </Button>\r\n        </div>\r\n      </form>\r\n      <p className=\"text text_type_main-small text_color_inactive pt-20\">\r\n        Вспомнили пароль? <Link to=\"/login\">Войти</Link>\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ForgotPass;","import ForgotPass from '../components/ForgotPass/ForgotPass';\r\n\r\nexport const ForgotPasswordPage = () => {\r\n  return <ForgotPass />;\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './ResetPass.module.css';\r\nimport { getUserData, setNewPass, updateAccToken } from '../../services/actions/user';\r\nimport { useSelector, useDispatch } from '../../services/types/hooks';\r\n\r\nfunction ResetPass() {\r\n\r\n  const dispatch = useDispatch();\r\n  \r\n  const userData = useSelector(state => state.user);\r\n\r\n  const isTokenExpired = () => {\r\n    if (!localStorage.initTime) return true; // there is no token at all...\r\n    return (Date.now() / 1000) > (Number(localStorage.initTime) + 1200);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!userData.user.name && localStorage.length !== 0) {\r\n      if (isTokenExpired()) dispatch(updateAccToken());\r\n      dispatch(getUserData());\r\n    }\r\n  }, [dispatch, userData])\r\n\r\n  const [passParams, setPassParams] = useState<{type: 'text' | 'password', icon: 'ShowIcon' | 'HideIcon'}>({type: 'password', icon: 'ShowIcon'})\r\n  const [valuePass, setValuePass] = useState('');\r\n  const [valueCode, setValueCode] = useState('');\r\n\r\n  const handleIconClick = () => {\r\n    setPassParams({\r\n      type: passParams.type === 'password' ? 'text' : 'password',\r\n      icon: passParams.icon === 'ShowIcon' ? 'HideIcon' : 'ShowIcon'\r\n    })\r\n  }\r\n\r\n  function handleSubmit(event: { preventDefault: () => void; }) {\r\n    event.preventDefault();\r\n    dispatch(setNewPass(valuePass, valueCode));\r\n  }\r\n\r\n  if (userData.refreshToken || localStorage.refreshToken || !userData.resetPass) return (<Redirect to=\"/\" />)\r\n\r\n  return (\r\n    <div className={`${styles.content}`}>\r\n      <p className=\"text text_type_main-medium\">\r\n        Восстановление пароля\r\n      </p>\r\n      <form action='' onSubmit={handleSubmit} id='form'>\r\n        <div className='pt-6'>\r\n          <Input \r\n            type={passParams.type} \r\n            placeholder={'Введите новый пароль'} \r\n            icon={passParams.icon} \r\n            onIconClick={handleIconClick}\r\n            value={valuePass}\r\n            onChange={e => setValuePass(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className='pt-6 pb-6'>\r\n          <Input \r\n            type={'text'} \r\n            placeholder={'Введите код из письма'} \r\n            name={'name'}\r\n            value={valueCode}\r\n            onChange={e => setValueCode(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className={styles.innerContent}>\r\n          <Button type=\"primary\" size=\"medium\"> \r\n            Войти\r\n          </Button>\r\n        </div>\r\n      </form>\r\n      <p className=\"text text_type_main-small text_color_inactive pt-20\">\r\n        Вспомнили пароль? <Link to=\"/login\">Войти</Link>\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ResetPass;","import ResetPass from '../components/ResetPass/ResetPass';\r\n\r\nexport const ResetPasswordPage = () => {\r\n  return <ResetPass />;\r\n}","import React, { FunctionComponent, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './Feed.module.css';\r\nimport { useSelector, useDispatch } from '../../services/types/hooks';\r\nimport { getItems } from '../../services/actions/shop';\r\nimport { ICardOrder, IOrder, IOrderIdTime, IOrderIngredients, IOrderList } from '../../services/types/components';\r\n\r\nconst Price: FunctionComponent = ({children}) => {\r\n  return (\r\n    <div className={`${styles.price}`}>\r\n      <p className=\"text text_type_digits-default mr-2\">{children}</p>\r\n      <CurrencyIcon type=\"primary\"/>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst OrderIdTime: FunctionComponent<IOrderIdTime> = ({_id, time}) => {\r\n  const timeOptions: {} = {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    hour: 'numeric',\r\n    minute: 'numeric',\r\n    second: 'numeric'\r\n  };\r\n\r\n  const goodLookTime = new Date(time);\r\n\r\n  return (\r\n    <div className={styles.orderId}>\r\n      <p className=\"text text_type_digits-default\" style={{maxWidth: '258px'}}>{_id}</p>\r\n      <p className=\"text text_type_main-default text_color_inactive\">{goodLookTime.toLocaleString(\"ru\", timeOptions)}</p>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst OrderIngredients: FunctionComponent<IOrderIngredients> = ({ingredientsId}) => {\r\n\r\n  const dispatch = useDispatch();\r\n  const ingredients = useSelector(state => state.shop.ingredients);\r\n  \r\n  let price: number = 0;\r\n  \r\n  useEffect(() => {\r\n    if (!ingredients.length) dispatch(getItems());\r\n    },\r\n    [dispatch, ingredients]\r\n  );  \r\n\r\n  const dataToIngredientPreview = (ingredientId: string, index: number) => {\r\n    const ingredient = ingredients.filter((ingr: { _id: string; }) => ingr._id === ingredientId)[0];\r\n    const widthRegulator = ingredientsId.length > 6 ? ingredientsId.length * Math.floor(ingredientsId.length / 5) : 0;\r\n    if (!ingredient) return null;\r\n    price += ingredient.price;\r\n    return (\r\n      <div key={index} className={styles.ingredientPreview} style={{left: `${-(24 + widthRegulator)*index}px`, zIndex: 100 - index}}>\r\n        <img className={styles.ingredientImage} src={ingredient.image} alt={ingredient.name} />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!ingredients.length) return null;\r\n\r\n  return (\r\n    <div className={styles.orderId}>\r\n      <div className={styles.ingredients}>\r\n        {ingredientsId.map(dataToIngredientPreview)}\r\n      </div>\r\n      <Price>{price}</Price>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst CardOrder: FunctionComponent<ICardOrder> = ({path, location, _id, number, ingredients, time, name, orders}) => {\r\n  return (\r\n    <Link to={{\r\n      pathname: `${path}/${_id}`,\r\n      state: {modal: true, background: location, _id: _id, number: number, orders: orders}\r\n    }}>\r\n      <div className={styles.cardOrder}>\r\n        <OrderIdTime _id={`#${number}`} time={time}/>\r\n        <p className=\"text text_type_main-medium pr-6 pl-6\">{name}</p>\r\n        <OrderIngredients ingredientsId={ingredients}/>\r\n      </div>\r\n    </Link>\r\n  )\r\n}\r\n\r\nconst OrderList: FunctionComponent<IOrderList> = ({path, orders, location}) => {\r\n  const dataToOrder = (order: IOrder) => {\r\n    return (\r\n      <CardOrder \r\n        path={path}\r\n        location={location} \r\n        _id={order._id}\r\n        number={order.number}\r\n        ingredients={order.ingredients}\r\n        time={order.createdAt}\r\n        name={order.name}\r\n        orders={orders}\r\n        key={order._id}\r\n      />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={styles.orders}>\r\n      {orders?.map(dataToOrder)}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default OrderList;","import React, { FunctionComponent, useCallback, useEffect, useState } from 'react';\r\nimport { Link, NavLink, Redirect, Route, Switch, useLocation } from 'react-router-dom';\r\nimport { Input, Button } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './Profile.module.css';\r\nimport { useSelector, useDispatch } from '../../services/types/hooks';\r\nimport { CHANGE_USER_EMAIL, CHANGE_USER_NAME, CHANGE_USER_PASS, deleteUserData, getUserData, updateAccToken } from '../../services/actions/user';\r\nimport { updateUser } from '../../utils/burger-api';\r\nimport OrderList from '../Feed/OrderList';\r\nimport { WS_CONNECTION_CLOSE, WS_CONNECTION_START } from '../../services/actions/shop';\r\nimport { INavItem, IProfile } from '../../services/types/components';\r\n\r\nconst NavItem: FunctionComponent<INavItem> = ({linkTo, exact, onClick, children}) => {\r\n  return (\r\n    <NavLink to={linkTo} className={`${styles.navigationLink}`} activeClassName={styles.chosen} exact={exact} onClick={onClick}>\r\n      <div className={`${styles.menuItem}`}>\r\n        <p className={`text text_type_main-medium ${styles.name}`}>\r\n          {children}\r\n        </p>\r\n      </div>\r\n    </NavLink>\r\n  )\r\n}\r\n\r\nconst Profile: FunctionComponent<IProfile> = ({path}) => {\r\n\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n\r\n  const messages = useSelector(state => state.shop.messages);\r\n  const ordersData = messages.length ? messages[0] : [];\r\n  \r\n  const userData = useSelector(state => state.user);\r\n  \r\n  const isTokenExpired = () => {\r\n    if (!localStorage.initTime) return true; // there is no token at all...\r\n    const tokenDieTime = Number(localStorage.initTime) + 1200;\r\n    const currentTime = Date.now() / 1000;\r\n    return currentTime > tokenDieTime;\r\n  }\r\n\r\n  const getUser = useCallback(() => {\r\n    if (isTokenExpired()) dispatch(updateAccToken());\r\n    dispatch(getUserData());\r\n  }, [dispatch])\r\n\r\n  useEffect(() => {\r\n    if (!userData.user.name && localStorage.length !== 0) {\r\n      getUser();\r\n    }\r\n  }, [userData, getUser])\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.accessToken ? `?token=${localStorage.accessToken.split(' ')[1]}` : ''\r\n    const wsUrlUserOrders = `wss://norma.nomoreparties.space/orders${token}`;\r\n    dispatch({ type: WS_CONNECTION_START, wsUrl: wsUrlUserOrders });\r\n    return () => {\r\n      dispatch({ type: WS_CONNECTION_CLOSE });\r\n    }\r\n  }, [dispatch]);  \r\n\r\n  const [activePage, setActivePage] = useState('profile')\r\n\r\n  function handleSubmit(event: { preventDefault: () => void; }) {\r\n    event.preventDefault();\r\n    updateUser(userData.user)\r\n  }\r\n\r\n  if (!localStorage.refreshToken) return (<Redirect to='/login' />);\r\n  console.log(ordersData, messages)\r\n  return (\r\n    <div className={`${styles.content}`}>\r\n      <div className={styles.leftBlock}>\r\n        <div className={styles.menu}>\r\n          <NavItem exact={true} linkTo={'/profile'}>\r\n            Профиль\r\n          </NavItem>\r\n          <NavItem exact={false} linkTo={'/profile/orders'}>\r\n            История заказов\r\n          </NavItem>\r\n          <Link to={'#'} onClick={() => {setActivePage('exit'); dispatch(deleteUserData(localStorage.refreshToken));}}>\r\n            <div className={`${styles.menuItem}`}>\r\n              <p className={`text text_type_main-medium ${activePage === 'exit' ? '' : 'text_color_inactive'}`}>\r\n                Выход\r\n              </p>\r\n            </div>\r\n          </Link>\r\n        </div>\r\n        <div className='pt-20'>\r\n          {\r\n            location.pathname === '/profile' \r\n              ? \r\n              <p className=\"text text_type_main-default text_color_inactive\">\r\n                В этом разделе вы можете изменить свои персональные данные\r\n              </p>\r\n              :\r\n              <p className=\"text text_type_main-default text_color_inactive\">\r\n                В этом разделе вы можете посмотреть свою историю заказов\r\n              </p>\r\n          }\r\n        </div>\r\n      </div>\r\n      <div className={styles.rightBlock}>\r\n        <Switch>\r\n          <Route path={`${path}`} exact>\r\n            <form action='' onSubmit={handleSubmit} className={`${styles.innerContent}`} id='form'>\r\n              <div className={styles.longInput}>\r\n                <Input \r\n                  type={'text'} \r\n                  placeholder={'Имя'}\r\n                  icon={'EditIcon'}\r\n                  size={'default'}\r\n                  value={userData.user.name}\r\n                  onChange={e => dispatch({type: CHANGE_USER_NAME, name: e.target.value})}\r\n                />\r\n              </div>\r\n              <div className={`${styles.longInput} pb-6 pt-6`}>\r\n                <Input \r\n                  type={'text'} \r\n                  placeholder={'Логин'}\r\n                  icon={'EditIcon'}\r\n                  value={userData.user.email}\r\n                  onChange={e => dispatch({type: CHANGE_USER_EMAIL, email: e.target.value})}\r\n                />\r\n              </div>\r\n              <div className={styles.longInput}>\r\n                <Input \r\n                  type={'password'} \r\n                  placeholder={'Пароль'}\r\n                  icon={'EditIcon'}\r\n                  value={userData.user.password}\r\n                  onChange={e => dispatch({type: CHANGE_USER_PASS, password: e.target.value})}\r\n                />\r\n              </div>\r\n              <div className={styles.saveButton}>\r\n                <Button type=\"primary\" size=\"medium\"> \r\n                  Сохранить\r\n                </Button>\r\n              </div>\r\n            </form>\r\n            <div className={styles.cancelButton}>\r\n              <Button type='secondary' size='medium' onClick={() => getUser()}>\r\n                Отмена\r\n              </Button>\r\n            </div>\r\n          </Route>\r\n          <Route path={`${path}/orders`}>\r\n            <OrderList path={`${path}/orders`} orders={ordersData.orders} location={location}/>\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Profile;","import React from \"react\";\r\nimport { Route, Switch, useHistory, useRouteMatch, useLocation } from 'react-router-dom';\r\nimport Profile from \"../components/Profile/Profile\";\r\nimport { OrderPage } from \".\";\r\nimport { ILocationState } from \"../services/types/components\";\r\n\r\nexport const ProfilePage = () => {\r\n  const { path } = useRouteMatch();\r\n  const location: any = useLocation<ILocationState>();\r\n  const history = useHistory();\r\n\r\n  const isModal = !!(\r\n    location.state && location.state.modal && (history.action !== 'POP')\r\n  );\r\n  \r\n  const orders = location.state ? location.state.orders : [];\r\n  const number = location.state ? location.state.number : undefined;\r\n  return (\r\n    <>\r\n      <Switch location={isModal ? {pathname: path} : location}>\r\n        <Route path={`${path}`} exact>\r\n          <Profile path={path}/>\r\n        </Route>\r\n        <Route path={`${path}/orders`} exact>\r\n          <Profile path={path}/>\r\n        </Route>\r\n        <Route path={`${path}/orders/:id`} exact>\r\n          <OrderPage orders={orders} number={number}/>\r\n        </Route>\r\n      </Switch>\r\n    </>\r\n  );\r\n}","import React, { FunctionComponent, useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useSelector, useDispatch } from '../../services/types/hooks';\r\nimport styles from './BurgerIngredients.module.css';\r\nimport Illustration from './Illustration';\r\nimport Name from './Name';\r\nimport { getItems } from '../../services/actions/shop';\r\nimport { INutrDetails } from '../../services/types/components';\r\n\r\nconst NutritionDetail: FunctionComponent<INutrDetails> = ({ nutritionType, nutritionValue }) => {\r\n\r\n  let name = '';\r\n  switch (nutritionType) {\r\n    case 'calories':\r\n      name = 'Калории, ккал';\r\n      break;\r\n    case 'proteins':\r\n      name = 'Белки, г';\r\n      break;\r\n    case 'fat':\r\n      name = 'Жиры, г';\r\n      break;\r\n    case 'carbohydrates':\r\n      name = 'Углеводы, г';\r\n      break;\r\n    default: \r\n      name = '';\r\n      break;\r\n  }\r\n\r\n  return (\r\n    <div className={`${styles.nutritionElement} text_color_inactive`}>\r\n      <p className={'text  text_type_main-default pb-2'}>{name}</p>\r\n      <p className={'text text_type_digits-default '}>{nutritionValue}</p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default function IngredientDetails() {\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const { id } = useParams<{id: string}>();\r\n  const ingredients = useSelector(state => state.shop.ingredients);\r\n  \r\n  useEffect(() => {\r\n    if (!ingredients.length) dispatch(getItems());\r\n    },\r\n    [dispatch, ingredients]\r\n  );  \r\n  \r\n  const ingredient = ingredients.filter((ingr: { _id: string | undefined; }) => ingr._id === id)[0];\r\n  \r\n  if (!ingredient) return null;\r\n\r\n  return (\r\n    <>\r\n      <Illustration image={ingredient.image_large} alt={ingredient.name}/>\r\n      <Name name={ingredient.name} size={'medium'} box={'pb-8 pt-4'}/>\r\n      <div className={`${styles.nutritionDetails} pb-15`}>\r\n        <NutritionDetail nutritionType={'calories'} nutritionValue={ingredient.calories} />\r\n        <NutritionDetail nutritionType={'proteins'} nutritionValue={ingredient.proteins} />\r\n        <NutritionDetail nutritionType={'fat'} nutritionValue={ingredient.fat} />\r\n        <NutritionDetail nutritionType={'carbohydrates'} nutritionValue={ingredient.carbohydrates} />\r\n      </div>\r\n    </>\r\n  )\r\n}","import IngredientDetails from '../components/BurgerIngredients/IngredientDetails';\r\n\r\nimport styles from './Ingredient.module.css';\r\n\r\nexport const IngredientPage = () => {\r\n  return (\r\n    <div className={`${styles.ingredient}`}>\r\n      <IngredientDetails />\r\n    </div>\r\n  )\r\n}","import React, { FunctionComponent, useEffect } from 'react';\r\nimport styles from './Feed.module.css';\r\nimport { useSelector, useDispatch } from '../../services/types/hooks';\r\nimport OrderList from './OrderList';\r\nimport { WS_CONNECTION_CLOSE, WS_CONNECTION_START } from '../../services/actions/shop';\r\nimport { ICompleted, IFeed, IOrder } from '../../services/types/components';\r\nimport { useLocation } from 'react-router';\r\n\r\nconst Completed: FunctionComponent<ICompleted> = ({text, number}) => {\r\n  return (\r\n    <div className={styles.completed}>\r\n      <p className=\"text text_type_main-medium\">\r\n        {text}\r\n      </p>\r\n      <p className={`${styles.glow} text text_type_digits-large`}>\r\n        {number}\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Feed: FunctionComponent<IFeed> = ({path}) => {\r\n\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n\r\n  const messages = useSelector(state => state.shop.messages);\r\n  const ordersData = messages.length ? messages[0] : [];\r\n\r\n  const { orders, total, totalToday } = ordersData;\r\n\r\n  useEffect(() => {  \r\n  const wsUrlAllOrders = `wss://norma.nomoreparties.space/orders/all`;\r\n    dispatch({ type: WS_CONNECTION_START, wsUrl: wsUrlAllOrders });\r\n    return () => {\r\n      dispatch({ type: WS_CONNECTION_CLOSE });\r\n    }\r\n  }, [dispatch]);  \r\n\r\n  if (!orders?.length) return null;\r\n\r\n  const doneOrders = orders.filter((order: { status: string; }) => order.status === 'done');\r\n  const inProgressOrders = orders.filter((order: { status: string; }) => order.status === 'pending');\r\n\r\n  const dataToNumberList = (order: IOrder, index: number) => {\r\n    return (\r\n      <p className=\"text text_type_digits-default pb-2 pr-1\" key={index}>\r\n        {`${order.number}`}\r\n      </p>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={styles.content}>\r\n      <div className={styles.leftBlock}>\r\n        <p className={'text text_type_main-large pt-10 pb-5'}>Лента заказов</p>\r\n        <OrderList path={path} location={location} orders={orders}/>\r\n      </div>\r\n      <div className={styles.rightBlock}>\r\n        <div className={styles.ordersBoard}>\r\n          <div className={`mr-10`}>\r\n            <p className=\"text text_type_main-medium pb-6\">\r\n              Готовы:\r\n            </p>\r\n            <div className={`${styles.ordersList}`} style={{color: '#00CCCC'}}>\r\n              {doneOrders.map(dataToNumberList)}\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <p className=\"text text_type_main-medium pb-6\">\r\n              В работе:\r\n            </p>\r\n            <div className={styles.ordersList} style={{color: '#00CCCC'}}>\r\n              {inProgressOrders.map(dataToNumberList)}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Completed text={'Выполнено за всё время:'} number={total}/>\r\n        <Completed text={'Выполнено за сегодня:'} number={totalToday}/>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Feed;","import React from \"react\";\r\nimport { useRouteMatch } from 'react-router-dom';\r\nimport Feed from \"../components/Feed/Feed\";\r\n\r\nexport const FeedPage = () => {\r\n  const { path } = useRouteMatch();\r\n\r\n  return <Feed path={path}/>;\r\n}","import React, { FunctionComponent, useEffect } from 'react';\r\nimport { CurrencyIcon } from '@ya.praktikum/react-developer-burger-ui-components';\r\nimport styles from './Feed.module.css';\r\nimport { useSelector, useDispatch } from '../../services/types/hooks';\r\nimport { getItems, getOrdersFeed } from '../../services/actions/shop';\r\nimport { IIngredientsRow, IOrderDetails } from '../../services/types/components';\r\n\r\nconst Price: FunctionComponent = ({children}) => {\r\n  return (\r\n    <div className={`${styles.price}`}>\r\n      <p className=\"text text_type_digits-default mr-2\">{children}</p>\r\n      <CurrencyIcon type=\"primary\"/>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst IngredientsRow: FunctionComponent<IIngredientsRow> = ({name, count, price, image}) => {\r\n  return (\r\n    <div className={styles.ingredientRow}>\r\n      <div className={styles.ingredientImageName}>\r\n        <div className={`${styles.ingredientPreview} mr-4`}>\r\n          <img className={styles.ingredientImage} src={image} alt={name} />\r\n        </div>\r\n        <p className=\"text text_type_main-default mr-4\">{name}</p>\r\n      </div>\r\n      <Price>{`${count} x ${price}`}</Price>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst OrderDetails: FunctionComponent<IOrderDetails> = ({_id, orders}) => {\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const allOrders = useSelector(state => state.shop.orders);\r\n  if (!orders) orders = allOrders;\r\n  const ingredients = useSelector(state => state.shop.ingredients);\r\n  \r\n  useEffect(() => {\r\n    if (!ingredients.length) dispatch(getItems());\r\n    },\r\n    [dispatch, ingredients]\r\n  );  \r\n\r\n  useEffect(() => {\r\n    if (!orders?.length) dispatch(getOrdersFeed());\r\n    },\r\n    [dispatch, orders]\r\n  );    \r\n\r\n  if (!orders?.length || !ingredients.length || !_id) return null;\r\n\r\n  const order = orders.filter(ord => ord._id === _id)[0];\r\n\r\n  const names = {'created': 'Выполнен', 'done': 'Выполнен', 'pending': 'Готовится'}\r\n  \r\n  const nameSize = order.name.length > 84 ? 'default' : 'medium';\r\n  const status = names[order.status];\r\n  \r\n  let price = 0;\r\n\r\n  const uniqueIngredients = order.ingredients.reduce(function(occurrence: any, item) {\r\n    occurrence[item] = (occurrence[item] || 0) + 1;\r\n    return occurrence;\r\n  }, {});\r\n  \r\n  const dataToIngredientRow = (ingredientId: string | number) => {\r\n    const ingredient = ingredients.filter((ingr: { _id: string | number; }) => ingr._id === ingredientId)[0];\r\n    price += ingredient.price;\r\n    return (\r\n      <IngredientsRow key={ingredient._id} name={ingredient.name} count={uniqueIngredients[ingredientId]} price={ingredient.price} image={ingredient.image}/>\r\n    )\r\n  }\r\n\r\n  const timeOptions: {} = {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n    hour: 'numeric',\r\n    minute: 'numeric',\r\n    second: 'numeric'\r\n  };\r\n  \r\n  const goodLookTime = new Date(order.createdAt);\r\n\r\n  return (\r\n    <div className={styles.orderContainer}>\r\n      <div style={{textAlign: 'left', width: '640px'}}>\r\n        <p className={`text text_type_main-${nameSize} pb-3`}>{order.name}</p>\r\n        <p className=\"text text_type_main-default pb-15 \" style={{color: '#00CCCC'}}>{status}</p>\r\n        <p className=\"text text_type_main-medium pb-6\">Состав:</p>\r\n      </div>\r\n      <div className={styles.ingredientsColumn}>\r\n        {Object.keys(uniqueIngredients).map(dataToIngredientRow)}\r\n      </div>\r\n      <div className={styles.orderTimePrice}>\r\n        <p className=\"text text_type_main-default text_color_inactive\">{goodLookTime.toLocaleString(\"ru\", timeOptions)}</p>\r\n        <Price>{price}</Price>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default OrderDetails;","import OrderDetails from '../components/Feed/OrderDetails';\r\nimport { useParams } from 'react-router-dom';\r\nimport styles from './Order.module.css';\r\nimport { FunctionComponent } from 'react';\r\nimport { IOrdersPage } from '../services/types/components';\r\n\r\nexport const OrderPage: FunctionComponent<IOrdersPage> = ({orders, number}) => {\r\n  const { id } = useParams<{id: string}>();\r\n\r\n  return (\r\n    <div className={styles.orderContainer}>\r\n      <p className=\"text text_type_digits-default pb-10\">#{number}</p>\r\n      <OrderDetails _id={id} orders={orders}/>\r\n    </div>\r\n  )\r\n}","import React, { FunctionComponent } from \"react\";\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { IProtectedRoute } from \"../../services/types/components\";\r\n\r\nexport const ProtectedRoute: FunctionComponent<IProtectedRoute> = ({ children, ...rest }) => {\r\n\r\n  const isAuth = () => {\r\n    // if (!localStorage.initTime) return false; // there is no token at all...\r\n    // return (Date.now() / 1000) < (localStorage.initTime + 1200);\r\n    return localStorage.refreshToken;\r\n  }\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) => \r\n        isAuth() ? (\r\n          children\r\n        ) : (\r\n          <Redirect \r\n            to={{\r\n              pathname: '/login',\r\n              state: {from: location}\r\n            }} \r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n} ","import React from 'react';\r\nimport { Switch, Route, useLocation, useHistory } from 'react-router-dom';\r\nimport AppHeader from '../AppHeader/AppHeader';\r\nimport { ConstructorPage, LoginPage, RegisterPage, ForgotPasswordPage, ResetPasswordPage, ProfilePage, FeedPage, IngredientPage, OrderPage } from '../../pages';\r\nimport { ProtectedRoute } from '../ProtectedRoute/ProtectedRoute';\r\nimport Modal from '../Modal/Modal';\r\nimport IngredientDetails from '../BurgerIngredients/IngredientDetails';\r\nimport OrderDetails from '../Feed/OrderDetails';\r\nimport { ILocationState } from '../../services/types/components';\r\n\r\nfunction App() {\r\n\r\n  const history = useHistory();\r\n  const location: any = useLocation<ILocationState>();\r\n\r\n  const handleCloseModal = () => {\r\n    location.state.modal = false;\r\n    history.push(\"/\");\r\n  }\r\n\r\n  const isModal = !!(\r\n    location.state && location.state.modal && (history.action !== 'POP')\r\n  );\r\n  const background = history.action === \"PUSH\" && location.state && location.state.background;\r\n  \r\n  const orders = location.state ? location.state.orders : [];\r\n  const number = location.state ? location.state.number : undefined;\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <AppHeader />\r\n      <Switch location={background || location}>\r\n        <Route path='/login'>\r\n          <LoginPage />\r\n        </Route>\r\n        <Route path='/register'>\r\n          <RegisterPage />\r\n        </Route>\r\n        <Route path='/forgot-password'>\r\n          <ForgotPasswordPage />\r\n        </Route>\r\n        <Route path='/reset-password'>\r\n          <ResetPasswordPage />\r\n        </Route>\r\n        <Route path='/feed' exact>\r\n          <FeedPage />\r\n        </Route>\r\n        <Route path='/feed/:id' exact>\r\n          <OrderPage orders={orders} number={number}/>\r\n        </Route>\r\n        <ProtectedRoute path='/profile'>\r\n          <ProfilePage />\r\n        </ProtectedRoute>\r\n        <Route path={`/ingredients/:id`}>\r\n          <IngredientPage />\r\n        </Route>\r\n        <Route path='/'>\r\n          <ConstructorPage />\r\n        </Route>\r\n      </Switch>\r\n      {\r\n        isModal \r\n        ?\r\n        <Route path={`/ingredients/:id`}>\r\n          <Modal header={'Детали ингредиента'} isVisible={true} onClose={handleCloseModal} box={{w: '720px', h: '540px'}}>\r\n            <IngredientDetails />\r\n          </Modal>\r\n        </Route> \r\n        :\r\n        null\r\n      }\r\n      {\r\n        isModal \r\n        ?\r\n        <Route path={`${background.pathname}/:id`}>\r\n          <Modal \r\n            header={`#${number}`} \r\n            headerClass={'text text_type_digits-default'} \r\n            isVisible={true} \r\n            onClose={handleCloseModal} \r\n            box={{w: '720px', h: '720px'}}\r\n          >\r\n            <OrderDetails _id={location.state._id} orders={orders}/>\r\n          </Modal>\r\n        </Route> \r\n        :\r\n        null\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { Reducer } from 'redux';\r\nimport {\r\n\r\n  GET_INGREDIENTS_FAILED,\r\n  GET_INGREDIENTS_REQUEST,\r\n  GET_INGREDIENTS_SUCCESS,\r\n  INCREASE_INGREDIENT_COUNT,\r\n  DECREASE_INGREDIENT_COUNT,\r\n  SET_INGREDIENT_COUNT,\r\n\r\n  CHANGE_SELECTED_BUN,\r\n  ADD_SELECTED_INGREDIENT,\r\n  DELETE_SELECTED_INGREDIENT,\r\n  SET_SELECTED_INGREDIENTS,\r\n\r\n  SET_INGREDIENT_MODAL,\r\n  DELETE_INGREDIENT_MODAL,\r\n\r\n  GET_ORDER_REQUEST,\r\n  GET_ORDER_SUCCESS,\r\n  GET_ORDER_FAILED,\r\n\r\n  GET_ORDERS_REQUEST,\r\n  GET_ORDERS_SUCCESS,\r\n  GET_ORDERS_FAILED,\r\n\r\n  WS_CONNECTION_SUCCESS,\r\n  WS_CONNECTION_ERROR,\r\n  WS_CONNECTION_CLOSED,\r\n  WS_GET_MESSAGE,\r\n\r\n} from '../actions/shop';\r\nimport { TShopActions } from '../types/shop';\r\n\r\ntype TInitialState = {\r\n  ingredients: [],\r\n  ingredientsRequest: boolean,\r\n  ingredientsFailed: boolean,\r\n\r\n  selectedBun: {id: null, uid: number},\r\n  selectedIngredients: [],\r\n  selectedIngredientsRequest: boolean,\r\n  selectedIngredientsFailed: boolean,\r\n\r\n  currentIngredient: {},\r\n\r\n  order: null,\r\n  orderRequest: boolean,\r\n  orderFailed: boolean,\r\n\r\n  orders: [],\r\n  totalOrders: null,\r\n  todayOrders: null,\r\n  ordersRequest: boolean,\r\n  ordersFailed: boolean,\r\n\r\n  wsConnected: boolean,\r\n  messages: [],\r\n  error: string,\r\n}\r\n\r\nconst initialState: TInitialState = {\r\n\r\n  ingredients: [],\r\n  ingredientsRequest: false,\r\n  ingredientsFailed: false,\r\n\r\n  selectedBun: {id: null, uid: 0},\r\n  selectedIngredients: [],\r\n  selectedIngredientsRequest: false,\r\n  selectedIngredientsFailed: false,\r\n\r\n  currentIngredient: {},\r\n\r\n  order: null,\r\n  orderRequest: false,\r\n  orderFailed: false,\r\n\r\n  orders: [],\r\n  totalOrders: null,\r\n  todayOrders: null,\r\n  ordersRequest: false,\r\n  ordersFailed: false,\r\n\r\n  wsConnected: false,\r\n  messages: [],\r\n  error: '',\r\n\r\n}\r\n\r\nexport const shopReducer: Reducer = (state = initialState, action: TShopActions) => {\r\n  switch (action.type) {\r\n    // All ingredinets (ingredients in BurgerIngredients)\r\n    case GET_INGREDIENTS_REQUEST: {\r\n      return {\r\n        ...state,\r\n        ingredientsRequest: true\r\n      }\r\n    }\r\n    case GET_INGREDIENTS_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        ingredientsRequest: false,\r\n        ingredientsFailed: false,\r\n        ingredients: action.ingredients\r\n      }\r\n    }\r\n    case GET_INGREDIENTS_FAILED: {\r\n      return {\r\n        ...state,\r\n        ingredientsRequest: false,\r\n        ingredientsFailed: true,\r\n      }\r\n    }\r\n    case INCREASE_INGREDIENT_COUNT: {\r\n      return {\r\n        ...state,\r\n        ingredients: state.ingredients.map((ingredient: {_id: string, __v: number}) => {\r\n          if (ingredient._id === action.id) {\r\n            return {\r\n              ...ingredient,\r\n              __v: ingredient.__v + 1\r\n            }\r\n          } else {\r\n            return ingredient\r\n          }\r\n        })\r\n      }\r\n    }\r\n    case DECREASE_INGREDIENT_COUNT: {\r\n      return {\r\n        ...state,\r\n        ingredients: state.ingredients.map((ingredient: {_id: string, __v: number}) => {\r\n          if (ingredient._id === action.id) {\r\n            return {\r\n              ...ingredient,\r\n              __v: ingredient.__v - 1\r\n            }\r\n          } else {\r\n            return ingredient\r\n          }\r\n        })\r\n      }\r\n    }\r\n    case SET_INGREDIENT_COUNT: {\r\n      return {\r\n        ...state,\r\n        ingredients: state.ingredients.map((ingredient: {_id: string}) => {\r\n          if (ingredient._id === action.id) {\r\n            return {\r\n              ...ingredient,\r\n              __v: action.count\r\n            }\r\n          } else {\r\n            return ingredient\r\n          }\r\n        })\r\n      }\r\n    }\r\n    // Selected ingredinets (ingredients in BurgerConstructor)\r\n    case CHANGE_SELECTED_BUN: {\r\n      return {\r\n        ...state,\r\n        selectedBun: {...state.selectedBun, id: action.bunId}\r\n      }\r\n    }\r\n    case ADD_SELECTED_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        selectedIngredients: [...state.selectedIngredients, action.ingredient]\r\n      }\r\n    }\r\n    case DELETE_SELECTED_INGREDIENT: {\r\n      return {\r\n        ...state,\r\n        selectedIngredients: state.selectedIngredients.filter((ingredient: {uid: string}) => ingredient.uid !== action.uid)\r\n      }\r\n    }\r\n    case SET_SELECTED_INGREDIENTS: {\r\n      return {\r\n        ...state,\r\n        selectedIngredients: action.ingredients\r\n      }\r\n    }\r\n    // Currently watching ingredient (in Modal)\r\n    case SET_INGREDIENT_MODAL: {\r\n      return {\r\n        ...state,\r\n        currentIngredient: action.ingredient\r\n      }\r\n    }\r\n    case DELETE_INGREDIENT_MODAL: {\r\n      return {\r\n        ...state, \r\n        currentIngredient: {}\r\n      }\r\n    }\r\n    // Currently created order (in OrderDetails)\r\n    case GET_ORDER_REQUEST: {\r\n      return {\r\n        ...state,\r\n        orderRequest: true\r\n      }\r\n    }\r\n    case GET_ORDER_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        orderRequest: false,\r\n        orderFailed: false,\r\n        order: action.order\r\n      }\r\n    }\r\n    case GET_ORDER_FAILED: {\r\n      return {\r\n        ...state,\r\n        orderRequest: false,\r\n        orderFailed: true,\r\n      }\r\n    }\r\n    // Orders in feed and orders history\r\n    case GET_ORDERS_REQUEST: {\r\n      return {\r\n        ...state,\r\n        ordersRequest: true\r\n      }\r\n    }\r\n    case GET_ORDERS_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        ordersRequest: false,\r\n        ordersFailed: false,\r\n        orders: action.orders,\r\n        totalOrders: action.total,\r\n        todayOrders: action.today\r\n      }\r\n    }\r\n    case GET_ORDERS_FAILED: {\r\n      return {\r\n        ...state,\r\n        ordersRequest: false,\r\n        ordersFailed: true,\r\n      }\r\n    }\r\n    // web socket\r\n    case WS_CONNECTION_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        wsConnected: true\r\n      };\r\n    }\r\n    case WS_CONNECTION_ERROR: {\r\n      return {\r\n        ...state,\r\n        error: action.payload,\r\n        wsConnected: false\r\n      };\r\n    }\r\n    case WS_CONNECTION_CLOSED: {\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        wsConnected: false\r\n      };\r\n    }\r\n    case WS_GET_MESSAGE: {\r\n      return {\r\n        ...state,\r\n        error: null,\r\n        messages: state.messages.length\r\n          ? [...state.messages, action.payload]\r\n          : [action.payload]\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}","import { Reducer } from \"redux\";\r\nimport { \r\n  \r\n  ADD_NEW_USER,\r\n  ADD_TOKENS,\r\n  SET_USER_DATA,\r\n  RESET_PASS_CODE_SENDED,\r\n  PASS_RESET_SUCCESS,\r\n  DELETE_USER_DATA,\r\n  UPDATE_ACC_TOKEN,\r\n  CHANGE_USER_NAME,\r\n  CHANGE_USER_EMAIL,\r\n  CHANGE_USER_PASS,\r\n\r\n} from \"../actions/user\";\r\nimport { TUserActions } from \"../types/user\";\r\n\r\ntype TInitialState = {\r\n\r\n  user: {\r\n    name: string,\r\n    email: string,\r\n    password: string\r\n  },\r\n  accessToken: null,\r\n  refreshToken: null,\r\n  resetPass: boolean,\r\n\r\n}\r\n\r\nconst initialState: TInitialState = {\r\n\r\n  user: {\r\n    name: '',\r\n    email: '',\r\n    password: ''\r\n  },\r\n  accessToken: null,\r\n  refreshToken: null,\r\n  resetPass: false,\r\n\r\n}\r\n\r\nexport const userReducer: Reducer = (state = initialState, action: TUserActions) => {\r\n  switch (action.type) {\r\n    case ADD_NEW_USER: {\r\n      return {\r\n        ...state,\r\n        user: {\r\n          ...state.user,\r\n          ...action.user\r\n        },\r\n        accessToken: action.accessToken,\r\n        refreshToken: action.refreshToken,\r\n      }\r\n    }\r\n    case ADD_TOKENS: {\r\n      return {\r\n        ...state,\r\n        refreshToken: localStorage.refreshToken,\r\n        accessToken: localStorage.accessToken\r\n      }\r\n    }\r\n    case UPDATE_ACC_TOKEN: {\r\n      return {\r\n        ...state,\r\n        accessToken: action.accessToken\r\n      }\r\n    }\r\n    case SET_USER_DATA: {\r\n      return {\r\n        ...state,\r\n        user: {\r\n          ...state.user,\r\n          ...action.user,\r\n        }\r\n      }\r\n    }\r\n    case DELETE_USER_DATA: {\r\n      localStorage.clear();\r\n      return initialState;\r\n    }\r\n    case CHANGE_USER_NAME: {\r\n      return {\r\n        ...state,\r\n        user: {\r\n          ...state.user,\r\n          name: action.name\r\n        }\r\n      }\r\n    }\r\n    case CHANGE_USER_EMAIL: {\r\n      return {\r\n        ...state,\r\n        user: {\r\n          ...state.user,\r\n          email: action.email\r\n        }\r\n      }\r\n    }\r\n    case CHANGE_USER_PASS: {\r\n      return {\r\n        ...state,\r\n        user: {\r\n          ...state.user,\r\n          password: action.password\r\n        }\r\n      }\r\n    }\r\n    case RESET_PASS_CODE_SENDED: {\r\n      return {\r\n        ...state,\r\n        resetPass: true\r\n      }\r\n    }\r\n    case PASS_RESET_SUCCESS: {\r\n      return {\r\n        ...state,\r\n        resetPass: false\r\n      }\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}","import { combineReducers } from 'redux';\r\nimport { shopReducer } from './shop';\r\nimport { userReducer } from './user';\r\n\r\nexport const rootReducer = combineReducers({\r\n  shop: shopReducer,\r\n  user: userReducer\r\n});","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { rootReducer } from './services/reducers/index';\r\nimport { socketMiddleware } from './services/middleware'; \r\nimport { compose, createStore, applyMiddleware } from 'redux';\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport { Provider } from 'react-redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nconst composeEnhancers =\r\n  typeof window === 'object' && composeWithDevTools\r\n    ? composeWithDevTools({})\r\n    : compose;\r\n\r\nconst enhancer = composeEnhancers(applyMiddleware(thunk, socketMiddleware()));\r\n\r\nexport const store = createStore(\r\n  rootReducer,\r\n  enhancer\r\n);\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <Router basename='/ya-react-burger'>\r\n        <App />\r\n      </Router>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","import { Dispatch } from \"redux\";\r\nimport { \r\n  WS_CONNECTION_START,\r\n  WS_CONNECTION_SUCCESS,\r\n  WS_CONNECTION_ERROR,\r\n  WS_CONNECTION_CLOSE,\r\n  WS_CONNECTION_CLOSED,\r\n  WS_SEND_MESSAGE,\r\n  WS_GET_MESSAGE\r\n} from \"../actions/shop\";\r\n\r\nexport const socketMiddleware = () => {\r\n  return (store: {dispatch: Dispatch}) => {\r\n    let socket: WebSocket | null = null;\r\n\r\n    return (next: Dispatch) => (action: { type: string; payload: any; wsUrl: string | URL }) => {\r\n      const { dispatch } = store;\r\n      const { type, payload, wsUrl } = action;\r\n \r\n      if (type === WS_CONNECTION_START) {\r\n        socket = new WebSocket(wsUrl);\r\n      }\r\n      if (type === WS_CONNECTION_CLOSE) {\r\n        socket?.close(1000, \"Page with socket was closed by user\");\r\n        console.log('closed')\r\n      }\r\n      if (socket) {\r\n        socket.onopen = event => {\r\n          dispatch({ type: WS_CONNECTION_SUCCESS, payload: event });\r\n        };\r\n\r\n        socket.onerror = event => {\r\n          dispatch({ type: WS_CONNECTION_ERROR, payload: event });\r\n        };\r\n\r\n        socket.onmessage = event => {\r\n          const { data } = event;\r\n          const parsedData = JSON.parse(data);\r\n          console.log(parsedData)\r\n          dispatch({ type: WS_GET_MESSAGE, payload: parsedData });\r\n        };\r\n\r\n        socket.onclose = event => {\r\n          dispatch({ type: WS_CONNECTION_CLOSED, payload: event });\r\n        };\r\n\r\n        if (type === WS_SEND_MESSAGE) {\r\n          const message = payload;\r\n          socket.send(JSON.stringify(message));\r\n        }\r\n      }\r\n\r\n      next(action);\r\n    };\r\n  };\r\n};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navigationPanel\":\"AppHeader_navigationPanel__MedkU\",\"content\":\"AppHeader_content__CgdFZ\",\"navigation\":\"AppHeader_navigation__L59ab\",\"navGroup\":\"AppHeader_navGroup__L4NQO\",\"navigationLink\":\"AppHeader_navigationLink__1quIk\",\"chosen\":\"AppHeader_chosen__oRSJR\",\"icon24\":\"AppHeader_icon24__x-rqw\",\"name\":\"AppHeader_name__fF3zj\",\"logo\":\"AppHeader_logo__1HCWP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"Modal_modal__39VXp\",\"modalHeader\":\"Modal_modalHeader__3iK_x\",\"modalBody\":\"Modal_modalBody__2aWW4\",\"modalOverlay\":\"Modal_modalOverlay__2Ifa0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Feed_content__3-KLW\",\"leftBlock\":\"Feed_leftBlock__8OEMi\",\"rightBlock\":\"Feed_rightBlock__DU3Th\",\"orders\":\"Feed_orders__kYH1s\",\"cardOrder\":\"Feed_cardOrder__3xLhh\",\"orderId\":\"Feed_orderId__1OWFQ\",\"ingredients\":\"Feed_ingredients__2kHni\",\"ingredientPreview\":\"Feed_ingredientPreview__30VJW\",\"ingredientImage\":\"Feed_ingredientImage__3ZjBI\",\"price\":\"Feed_price__2mkzO\",\"ordersBoard\":\"Feed_ordersBoard__2rMSW\",\"ordersList\":\"Feed_ordersList__29yz-\",\"completed\":\"Feed_completed__1iv1N\",\"glow\":\"Feed_glow__3N_bs\",\"orderContainer\":\"Feed_orderContainer__YY8DT\",\"ingredientsColumn\":\"Feed_ingredientsColumn__3xnIm\",\"ingredientRow\":\"Feed_ingredientRow__1k62L\",\"ingredientImageName\":\"Feed_ingredientImageName__2-zG6\",\"orderTimePrice\":\"Feed_orderTimePrice__39sKo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Auth_content__2Fxnl\",\"innerContent\":\"Auth_innerContent__2Duz3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Register_content__27XHP\",\"innerContent\":\"Register_innerContent__2ZbUw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"ForgotPass_content__2gAlA\",\"innerContent\":\"ForgotPass_innerContent__3fh_V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"ResetPass_content__1DcKP\",\"innerContent\":\"ResetPass_innerContent__L3FpN\"};"],"sourceRoot":""}